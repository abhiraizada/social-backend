{"{\"assumptions\":{},\"sourceRoot\":\"/Users/prashant/Desktop/social-backend/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/prashant/Desktop/social-backend\",\"filename\":\"/Users/prashant/Desktop/social-backend/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/prashant/Desktop/social-backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.20.2:development":{"value":{"code":"const express = require(\"express\");\nconst cors = require(\"cors\");\nvar bodyParser = require('body-parser');\nconst connectDB = require(\"./config/db\");\nconst jwt = require(\"jsonwebtoken\");\nconst qrcode = require(\"qrcode\");\nconst sseRoute = require(\"./routes/sse\");\nvar urlencodedParser = bodyParser.urlencoded({\n  extended: false\n});\n// app.use(express.static('public'));  \nconst app = express();\nconnectDB();\napp.use(express.json({\n  extended: false\n}));\napp.use(cors());\napp.get('/', (req, res) => {\n  console.log('res is ', res);\n  res.send('Hello World!');\n});\napp.post('/post', (req, res) => {\n  res.json({\n    success: true\n  });\n});\napp.use(function (req, res, next) {\n  res.flush = function () {/* Do nothing */};\n  next();\n});\napp.use(sseRoute);\napp.use('/auth', require(\"./routes/auth\"));\napp.use('/table', require(\"./routes/table\"));\napp.use('/qr', require(\"./routes/qr\"));\napp.use('/order', require(\"./routes/order\"));\napp.use('/seq', require(\"./routes/order\"));\napp.listen(process.env.PORT, () => console.log(`Example app listening on port`, process.env.PORT));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNvcnMiLCJib2R5UGFyc2VyIiwiY29ubmVjdERCIiwiand0IiwicXJjb2RlIiwic3NlUm91dGUiLCJ1cmxlbmNvZGVkUGFyc2VyIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwiYXBwIiwidXNlIiwianNvbiIsImdldCIsInJlcSIsInJlcyIsImNvbnNvbGUiLCJsb2ciLCJzZW5kIiwicG9zdCIsInN1Y2Nlc3MiLCJuZXh0IiwiZmx1c2giLCJsaXN0ZW4iLCJwcm9jZXNzIiwiZW52IiwiUE9SVCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3ByYXNoYW50L0Rlc2t0b3Avc29jaWFsLWJhY2tlbmQvIiwic291cmNlcyI6WyJzZXJ2ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoXCJleHByZXNzXCIpO1xuY29uc3QgY29ycyA9IHJlcXVpcmUoXCJjb3JzXCIpO1xuXG52YXIgYm9keVBhcnNlciA9IHJlcXVpcmUoJ2JvZHktcGFyc2VyJyk7ICBcbmNvbnN0IGNvbm5lY3REQiA9IHJlcXVpcmUoXCIuL2NvbmZpZy9kYlwiKTtcbmNvbnN0IGp3dCA9IHJlcXVpcmUoXCJqc29ud2VidG9rZW5cIik7XG5jb25zdCBxcmNvZGUgPSByZXF1aXJlKFwicXJjb2RlXCIpO1xuY29uc3Qgc3NlUm91dGUgPSByZXF1aXJlKFwiLi9yb3V0ZXMvc3NlXCIpO1xuXG5cbnZhciB1cmxlbmNvZGVkUGFyc2VyID0gYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IGZhbHNlIH0pICBcbi8vIGFwcC51c2UoZXhwcmVzcy5zdGF0aWMoJ3B1YmxpYycpKTsgIFxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuY29ubmVjdERCKClcblxuYXBwLnVzZShleHByZXNzLmpzb24oeyBleHRlbmRlZDogZmFsc2UgfSkpO1xuYXBwLnVzZShjb3JzKCkpO1xuXG5hcHAuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdyZXMgaXMgJyxyZXMpXG4gIHJlcy5zZW5kKCdIZWxsbyBXb3JsZCEnKTtcbn0pO1xuYXBwLnBvc3QoJy9wb3N0JywocmVxLHJlcyk9PntcbiAgICByZXMuanNvbih7c3VjY2Vzczp0cnVlfSlcbn0pXG5hcHAudXNlKGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkge1xuICByZXMuZmx1c2ggPSBmdW5jdGlvbiAoKSB7IC8qIERvIG5vdGhpbmcgKi8gfVxuICBuZXh0KCk7XG59KVxuYXBwLnVzZShzc2VSb3V0ZSk7XG5hcHAudXNlKCcvYXV0aCcscmVxdWlyZShcIi4vcm91dGVzL2F1dGhcIikpO1xuYXBwLnVzZSgnL3RhYmxlJyxyZXF1aXJlKFwiLi9yb3V0ZXMvdGFibGVcIikpO1xuXG5hcHAudXNlKCcvcXInLHJlcXVpcmUoXCIuL3JvdXRlcy9xclwiKSk7XG5hcHAudXNlKCcvb3JkZXInLHJlcXVpcmUoXCIuL3JvdXRlcy9vcmRlclwiKSk7XG5hcHAudXNlKCcvc2VxJyxyZXF1aXJlKFwiLi9yb3V0ZXMvb3JkZXJcIikpO1xuYXBwLmxpc3Rlbihwcm9jZXNzLmVudi5QT1JULCAoKSA9PlxuICBjb25zb2xlLmxvZyhgRXhhbXBsZSBhcHAgbGlzdGVuaW5nIG9uIHBvcnRgLCBwcm9jZXNzLmVudi5QT1JUKSxcbik7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUMsSUFBSSxHQUFHRCxPQUFPLENBQUMsTUFBTSxDQUFDO0FBRTVCLElBQUlFLFVBQVUsR0FBR0YsT0FBTyxDQUFDLGFBQWEsQ0FBQztBQUN2QyxNQUFNRyxTQUFTLEdBQUdILE9BQU8sQ0FBQyxhQUFhLENBQUM7QUFDeEMsTUFBTUksR0FBRyxHQUFHSixPQUFPLENBQUMsY0FBYyxDQUFDO0FBQ25DLE1BQU1LLE1BQU0sR0FBR0wsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUNoQyxNQUFNTSxRQUFRLEdBQUdOLE9BQU8sQ0FBQyxjQUFjLENBQUM7QUFHeEMsSUFBSU8sZ0JBQWdCLEdBQUdMLFVBQVUsQ0FBQ00sVUFBVSxDQUFDO0VBQUVDLFFBQVEsRUFBRTtBQUFNLENBQUMsQ0FBQztBQUNqRTtBQUNBLE1BQU1DLEdBQUcsR0FBR1gsT0FBTyxFQUFFO0FBQ3JCSSxTQUFTLEVBQUU7QUFFWE8sR0FBRyxDQUFDQyxHQUFHLENBQUNaLE9BQU8sQ0FBQ2EsSUFBSSxDQUFDO0VBQUVILFFBQVEsRUFBRTtBQUFNLENBQUMsQ0FBQyxDQUFDO0FBQzFDQyxHQUFHLENBQUNDLEdBQUcsQ0FBQ1YsSUFBSSxFQUFFLENBQUM7QUFFZlMsR0FBRyxDQUFDRyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ3pCQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxTQUFTLEVBQUNGLEdBQUcsQ0FBQztFQUMxQkEsR0FBRyxDQUFDRyxJQUFJLENBQUMsY0FBYyxDQUFDO0FBQzFCLENBQUMsQ0FBQztBQUNGUixHQUFHLENBQUNTLElBQUksQ0FBQyxPQUFPLEVBQUMsQ0FBQ0wsR0FBRyxFQUFDQyxHQUFHLEtBQUc7RUFDeEJBLEdBQUcsQ0FBQ0gsSUFBSSxDQUFDO0lBQUNRLE9BQU8sRUFBQztFQUFJLENBQUMsQ0FBQztBQUM1QixDQUFDLENBQUM7QUFDRlYsR0FBRyxDQUFDQyxHQUFHLENBQUMsVUFBVUcsR0FBRyxFQUFFQyxHQUFHLEVBQUVNLElBQUksRUFBRTtFQUNoQ04sR0FBRyxDQUFDTyxLQUFLLEdBQUcsWUFBWSxDQUFFLGlCQUFrQjtFQUM1Q0QsSUFBSSxFQUFFO0FBQ1IsQ0FBQyxDQUFDO0FBQ0ZYLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDTCxRQUFRLENBQUM7QUFDakJJLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLE9BQU8sRUFBQ1gsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQ3pDVSxHQUFHLENBQUNDLEdBQUcsQ0FBQyxRQUFRLEVBQUNYLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBRTNDVSxHQUFHLENBQUNDLEdBQUcsQ0FBQyxLQUFLLEVBQUNYLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUNyQ1UsR0FBRyxDQUFDQyxHQUFHLENBQUMsUUFBUSxFQUFDWCxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUMzQ1UsR0FBRyxDQUFDQyxHQUFHLENBQUMsTUFBTSxFQUFDWCxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUN6Q1UsR0FBRyxDQUFDYSxNQUFNLENBQUNDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxJQUFJLEVBQUUsTUFDM0JWLE9BQU8sQ0FBQ0MsR0FBRyxDQUFFLCtCQUE4QixFQUFFTyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsSUFBSSxDQUFDLENBQy9EIn0=","map":{"version":3,"names":["express","require","cors","bodyParser","connectDB","jwt","qrcode","sseRoute","urlencodedParser","urlencoded","extended","app","use","json","get","req","res","console","log","send","post","success","next","flush","listen","process","env","PORT"],"sourceRoot":"/Users/prashant/Desktop/social-backend/","sources":["server.js"],"sourcesContent":["const express = require(\"express\");\nconst cors = require(\"cors\");\n\nvar bodyParser = require('body-parser');  \nconst connectDB = require(\"./config/db\");\nconst jwt = require(\"jsonwebtoken\");\nconst qrcode = require(\"qrcode\");\nconst sseRoute = require(\"./routes/sse\");\n\n\nvar urlencodedParser = bodyParser.urlencoded({ extended: false })  \n// app.use(express.static('public'));  \nconst app = express();\nconnectDB()\n\napp.use(express.json({ extended: false }));\napp.use(cors());\n\napp.get('/', (req, res) => {\n  console.log('res is ',res)\n  res.send('Hello World!');\n});\napp.post('/post',(req,res)=>{\n    res.json({success:true})\n})\napp.use(function (req, res, next) {\n  res.flush = function () { /* Do nothing */ }\n  next();\n})\napp.use(sseRoute);\napp.use('/auth',require(\"./routes/auth\"));\napp.use('/table',require(\"./routes/table\"));\n\napp.use('/qr',require(\"./routes/qr\"));\napp.use('/order',require(\"./routes/order\"));\napp.use('/seq',require(\"./routes/order\"));\napp.listen(process.env.PORT, () =>\n  console.log(`Example app listening on port`, process.env.PORT),\n);"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAE5B,IAAIE,UAAU,GAAGF,OAAO,CAAC,aAAa,CAAC;AACvC,MAAMG,SAAS,GAAGH,OAAO,CAAC,aAAa,CAAC;AACxC,MAAMI,GAAG,GAAGJ,OAAO,CAAC,cAAc,CAAC;AACnC,MAAMK,MAAM,GAAGL,OAAO,CAAC,QAAQ,CAAC;AAChC,MAAMM,QAAQ,GAAGN,OAAO,CAAC,cAAc,CAAC;AAGxC,IAAIO,gBAAgB,GAAGL,UAAU,CAACM,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAM,CAAC,CAAC;AACjE;AACA,MAAMC,GAAG,GAAGX,OAAO,EAAE;AACrBI,SAAS,EAAE;AAEXO,GAAG,CAACC,GAAG,CAACZ,OAAO,CAACa,IAAI,CAAC;EAAEH,QAAQ,EAAE;AAAM,CAAC,CAAC,CAAC;AAC1CC,GAAG,CAACC,GAAG,CAACV,IAAI,EAAE,CAAC;AAEfS,GAAG,CAACG,GAAG,CAAC,GAAG,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EACzBC,OAAO,CAACC,GAAG,CAAC,SAAS,EAACF,GAAG,CAAC;EAC1BA,GAAG,CAACG,IAAI,CAAC,cAAc,CAAC;AAC1B,CAAC,CAAC;AACFR,GAAG,CAACS,IAAI,CAAC,OAAO,EAAC,CAACL,GAAG,EAACC,GAAG,KAAG;EACxBA,GAAG,CAACH,IAAI,CAAC;IAACQ,OAAO,EAAC;EAAI,CAAC,CAAC;AAC5B,CAAC,CAAC;AACFV,GAAG,CAACC,GAAG,CAAC,UAAUG,GAAG,EAAEC,GAAG,EAAEM,IAAI,EAAE;EAChCN,GAAG,CAACO,KAAK,GAAG,YAAY,CAAE,iBAAkB;EAC5CD,IAAI,EAAE;AACR,CAAC,CAAC;AACFX,GAAG,CAACC,GAAG,CAACL,QAAQ,CAAC;AACjBI,GAAG,CAACC,GAAG,CAAC,OAAO,EAACX,OAAO,CAAC,eAAe,CAAC,CAAC;AACzCU,GAAG,CAACC,GAAG,CAAC,QAAQ,EAACX,OAAO,CAAC,gBAAgB,CAAC,CAAC;AAE3CU,GAAG,CAACC,GAAG,CAAC,KAAK,EAACX,OAAO,CAAC,aAAa,CAAC,CAAC;AACrCU,GAAG,CAACC,GAAG,CAAC,QAAQ,EAACX,OAAO,CAAC,gBAAgB,CAAC,CAAC;AAC3CU,GAAG,CAACC,GAAG,CAAC,MAAM,EAACX,OAAO,CAAC,gBAAgB,CAAC,CAAC;AACzCU,GAAG,CAACa,MAAM,CAACC,OAAO,CAACC,GAAG,CAACC,IAAI,EAAE,MAC3BV,OAAO,CAACC,GAAG,CAAE,+BAA8B,EAAEO,OAAO,CAACC,GAAG,CAACC,IAAI,CAAC,CAC/D"}},"mtime":1671516064465},"{\"assumptions\":{},\"sourceRoot\":\"/Users/prashant/Desktop/social-backend/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/prashant/Desktop/social-backend\",\"filename\":\"/Users/prashant/Desktop/social-backend/config/db.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/prashant/Desktop/social-backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.20.2:development":{"value":{"code":"const mongoose = require('mongoose');\nrequire('dotenv').config();\nconst db = process.env.MONGO_URI;\nconst connectDb = async () => {\n  try {\n    await mongoose.connect(db, {\n      useNewUrlParser: true,\n      useUnifiedTopology: true\n    });\n    console.log('Db Connected');\n  } catch (err) {\n    console.error(err.message);\n    process.exit(1);\n  }\n};\nmodule.exports = connectDb;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJjb25maWciLCJkYiIsInByb2Nlc3MiLCJlbnYiLCJNT05HT19VUkkiLCJjb25uZWN0RGIiLCJjb25uZWN0IiwidXNlTmV3VXJsUGFyc2VyIiwidXNlVW5pZmllZFRvcG9sb2d5IiwiY29uc29sZSIsImxvZyIsImVyciIsImVycm9yIiwibWVzc2FnZSIsImV4aXQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcHJhc2hhbnQvRGVza3RvcC9zb2NpYWwtYmFja2VuZC9jb25maWcvIiwic291cmNlcyI6WyJkYi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG5yZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKVxuY29uc3QgZGIgPSBwcm9jZXNzLmVudi5NT05HT19VUkk7XG5cbmNvbnN0IGNvbm5lY3REYiA9IGFzeW5jKCkgPT57XG4gICAgdHJ5e1xuICAgICAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0KGRiLHtcbiAgICAgICAgICAgIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSwgXG4gICAgICAgICAgICB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zb2xlLmxvZygnRGIgQ29ubmVjdGVkJyk7XG4gICAgfVxuICAgIGNhdGNoKGVycil7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBjb25uZWN0RGI7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFDcENBLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQ0MsTUFBTSxFQUFFO0FBQzFCLE1BQU1DLEVBQUUsR0FBR0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFNBQVM7QUFFaEMsTUFBTUMsU0FBUyxHQUFHLFlBQVU7RUFDeEIsSUFBRztJQUNDLE1BQU1QLFFBQVEsQ0FBQ1EsT0FBTyxDQUFDTCxFQUFFLEVBQUM7TUFDdEJNLGVBQWUsRUFBRSxJQUFJO01BQ3JCQyxrQkFBa0IsRUFBRTtJQUN4QixDQUFDLENBQUM7SUFDRkMsT0FBTyxDQUFDQyxHQUFHLENBQUMsY0FBYyxDQUFDO0VBQy9CLENBQUMsQ0FDRCxPQUFNQyxHQUFHLEVBQUM7SUFDTkYsT0FBTyxDQUFDRyxLQUFLLENBQUNELEdBQUcsQ0FBQ0UsT0FBTyxDQUFDO0lBQzFCWCxPQUFPLENBQUNZLElBQUksQ0FBQyxDQUFDLENBQUM7RUFDbkI7QUFDSixDQUFDO0FBRURDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHWCxTQUFTIn0=","map":{"version":3,"names":["mongoose","require","config","db","process","env","MONGO_URI","connectDb","connect","useNewUrlParser","useUnifiedTopology","console","log","err","error","message","exit","module","exports"],"sourceRoot":"/Users/prashant/Desktop/social-backend/config/","sources":["db.js"],"sourcesContent":["const mongoose = require('mongoose');\nrequire('dotenv').config()\nconst db = process.env.MONGO_URI;\n\nconst connectDb = async() =>{\n    try{\n        await mongoose.connect(db,{\n            useNewUrlParser: true, \n            useUnifiedTopology: true,\n        });\n        console.log('Db Connected');\n    }\n    catch(err){\n        console.error(err.message);\n        process.exit(1);\n    }\n};\n\nmodule.exports = connectDb;"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AACpCA,OAAO,CAAC,QAAQ,CAAC,CAACC,MAAM,EAAE;AAC1B,MAAMC,EAAE,GAAGC,OAAO,CAACC,GAAG,CAACC,SAAS;AAEhC,MAAMC,SAAS,GAAG,YAAU;EACxB,IAAG;IACC,MAAMP,QAAQ,CAACQ,OAAO,CAACL,EAAE,EAAC;MACtBM,eAAe,EAAE,IAAI;MACrBC,kBAAkB,EAAE;IACxB,CAAC,CAAC;IACFC,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;EAC/B,CAAC,CACD,OAAMC,GAAG,EAAC;IACNF,OAAO,CAACG,KAAK,CAACD,GAAG,CAACE,OAAO,CAAC;IAC1BX,OAAO,CAACY,IAAI,CAAC,CAAC,CAAC;EACnB;AACJ,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGX,SAAS"}},"mtime":1671425301312},"{\"assumptions\":{},\"sourceRoot\":\"/Users/prashant/Desktop/social-backend/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/prashant/Desktop/social-backend\",\"filename\":\"/Users/prashant/Desktop/social-backend/routes/auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/prashant/Desktop/social-backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.20.2:development":{"value":{"code":"const User = require(\"../model/user\");\nconst express = require('express');\nconst router = express.Router();\nconst bcrypt = require('bcrypt');\nconst jwt = require(\"jsonwebtoken\");\nconst qrcode = require(\"qrcode\");\n// Register\n// ...\n\nrouter.post(\"/register\", async (req, res) => {\n  // Our register logic starts here\n\n  try {\n    // Get user input\n    console.log('req.body', req.body);\n    const {\n      name,\n      email,\n      password,\n      type\n    } = req.body;\n\n    // Validate user input\n    if (!(email && password && name)) {\n      res.status(400).send({\n        \"message\": \"All input is required\"\n      });\n    }\n\n    // check if user already exist\n    // Validate if user exist in our database\n    const oldUser = await User.findOne({\n      email\n    });\n    if (oldUser) {\n      return res.status(409).send(\"User Already Exist. Please Login\");\n    }\n\n    // Encrypt user password\n    let encryptedPassword = await bcrypt.hash(password, 10);\n\n    // Create user in our database\n    const user = await User.create({\n      name,\n      email: email.toLowerCase(),\n      // sanitize: convert email to lowercase\n      password: encryptedPassword,\n      type\n    });\n\n    // Create token\n    const token = jwt.sign({\n      user_id: user._id,\n      email\n    }, process.env.TOKEN_KEY, {\n      expiresIn: \"2h\"\n    });\n\n    // return new user\n    res.status(201).json({\n      token\n    });\n  } catch (err) {\n    console.log(err);\n  }\n  // Our register logic ends here\n});\n\n// ...\n;\n\n// Login\n// ...\n\nrouter.post(\"/login\", async (req, res) => {\n  // Our login logic starts here\n  try {\n    // Get user input\n    const {\n      email,\n      password\n    } = req.body;\n\n    // Validate user input\n    if (!(email && password)) {\n      res.status(400).json({\n        \"message\": \"All input is required\"\n      });\n    }\n\n    // Validate if user exist in our database\n    const user = await User.findOne({\n      email\n    });\n    if (user && (await bcrypt.compare(password, user.password))) {\n      // Create token\n      const token = jwt.sign({\n        user_id: user._id,\n        email\n      }, process.env.TOKEN_KEY, {\n        expiresIn: \"2h\"\n      });\n\n      // save user token\n      user.token = token;\n\n      // user\n      return res.status(200).json({\n        token\n      });\n    }\n    return res.status(400).send(\"Invalid Credentials\");\n  } catch (err) {\n    console.log(err);\n  }\n  // Our login logic ends here\n});\n\n// ...\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVc2VyIiwicmVxdWlyZSIsImV4cHJlc3MiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJiY3J5cHQiLCJqd3QiLCJxcmNvZGUiLCJwb3N0IiwicmVxIiwicmVzIiwiY29uc29sZSIsImxvZyIsImJvZHkiLCJuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsInR5cGUiLCJzdGF0dXMiLCJzZW5kIiwib2xkVXNlciIsImZpbmRPbmUiLCJlbmNyeXB0ZWRQYXNzd29yZCIsImhhc2giLCJ1c2VyIiwiY3JlYXRlIiwidG9Mb3dlckNhc2UiLCJ0b2tlbiIsInNpZ24iLCJ1c2VyX2lkIiwiX2lkIiwicHJvY2VzcyIsImVudiIsIlRPS0VOX0tFWSIsImV4cGlyZXNJbiIsImpzb24iLCJlcnIiLCJjb21wYXJlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3ByYXNoYW50L0Rlc2t0b3Avc29jaWFsLWJhY2tlbmQvcm91dGVzLyIsInNvdXJjZXMiOlsiYXV0aC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBVc2VyID0gcmVxdWlyZShcIi4uL21vZGVsL3VzZXJcIik7XG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0JylcbmNvbnN0IGp3dCA9IHJlcXVpcmUoXCJqc29ud2VidG9rZW5cIik7XG5jb25zdCBxcmNvZGUgPSByZXF1aXJlKFwicXJjb2RlXCIpO1xuLy8gUmVnaXN0ZXJcbi8vIC4uLlxuXG5yb3V0ZXIucG9zdChcIi9yZWdpc3RlclwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICAvLyBPdXIgcmVnaXN0ZXIgbG9naWMgc3RhcnRzIGhlcmVcbiAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCB1c2VyIGlucHV0XG4gICAgICBjb25zb2xlLmxvZygncmVxLmJvZHknLHJlcS5ib2R5KVxuICAgICAgY29uc3QgeyBuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIHR5cGUgfSA9IHJlcS5ib2R5O1xuICBcbiAgICAgIC8vIFZhbGlkYXRlIHVzZXIgaW5wdXRcbiAgICAgIGlmICghKGVtYWlsICYmIHBhc3N3b3JkICYmICBuYW1lICkpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLnNlbmQoe1wibWVzc2FnZVwiOlwiQWxsIGlucHV0IGlzIHJlcXVpcmVkXCJ9KTtcbiAgICAgIH1cbiAgXG4gICAgICAvLyBjaGVjayBpZiB1c2VyIGFscmVhZHkgZXhpc3RcbiAgICAgIC8vIFZhbGlkYXRlIGlmIHVzZXIgZXhpc3QgaW4gb3VyIGRhdGFiYXNlXG4gICAgICBjb25zdCBvbGRVc2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgZW1haWwgfSk7XG4gIFxuICAgICAgaWYgKG9sZFVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5zZW5kKFwiVXNlciBBbHJlYWR5IEV4aXN0LiBQbGVhc2UgTG9naW5cIik7XG4gICAgICB9XG4gIFxuICAgICAgLy8gRW5jcnlwdCB1c2VyIHBhc3N3b3JkXG4gICAgICBsZXQgZW5jcnlwdGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgMTApO1xuICBcbiAgICAgIC8vIENyZWF0ZSB1c2VyIGluIG91ciBkYXRhYmFzZVxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuY3JlYXRlKHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZW1haWw6IGVtYWlsLnRvTG93ZXJDYXNlKCksIC8vIHNhbml0aXplOiBjb252ZXJ0IGVtYWlsIHRvIGxvd2VyY2FzZVxuICAgICAgICBwYXNzd29yZDogZW5jcnlwdGVkUGFzc3dvcmQsXG4gICAgICAgIHR5cGVcbiAgICAgIH0pO1xuICBcbiAgICAgIC8vIENyZWF0ZSB0b2tlblxuICAgICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihcbiAgICAgICAgeyB1c2VyX2lkOiB1c2VyLl9pZCwgZW1haWwgfSxcbiAgICAgICAgcHJvY2Vzcy5lbnYuVE9LRU5fS0VZLFxuICAgICAgICB7XG4gICAgICAgICAgZXhwaXJlc0luOiBcIjJoXCIsXG4gICAgICAgIH1cbiAgICAgICk7XG4gIFxuICAgICAgLy8gcmV0dXJuIG5ldyB1c2VyXG4gICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IHRva2VuIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9XG4gICAgLy8gT3VyIHJlZ2lzdGVyIGxvZ2ljIGVuZHMgaGVyZVxuICB9KTtcbiAgXG4gIC8vIC4uLlxuICA7XG5cbi8vIExvZ2luXG4vLyAuLi5cblxucm91dGVyLnBvc3QoXCIvbG9naW5cIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgLy8gT3VyIGxvZ2luIGxvZ2ljIHN0YXJ0cyBoZXJlXG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCB1c2VyIGlucHV0XG4gICAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG4gIFxuICAgICAgLy8gVmFsaWRhdGUgdXNlciBpbnB1dFxuICAgICAgaWYgKCEoZW1haWwgJiYgcGFzc3dvcmQpKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcIm1lc3NhZ2VcIjpcIkFsbCBpbnB1dCBpcyByZXF1aXJlZFwifSk7XG4gICAgICB9XG4gIFxuICAgICAgLy8gVmFsaWRhdGUgaWYgdXNlciBleGlzdCBpbiBvdXIgZGF0YWJhc2VcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KTtcbiAgXG4gICAgICBpZiAodXNlciAmJiAoYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpKSkge1xuICAgICAgICAvLyBDcmVhdGUgdG9rZW5cbiAgICAgICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihcbiAgICAgICAgICB7IHVzZXJfaWQ6IHVzZXIuX2lkLCBlbWFpbCB9LFxuICAgICAgICAgIHByb2Nlc3MuZW52LlRPS0VOX0tFWSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBleHBpcmVzSW46IFwiMmhcIixcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gIFxuICAgICAgICAvLyBzYXZlIHVzZXIgdG9rZW5cbiAgICAgICAgdXNlci50b2tlbiA9IHRva2VuO1xuICBcbiAgICAgICAgLy8gdXNlclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyB0b2tlbiB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChcIkludmFsaWQgQ3JlZGVudGlhbHNcIik7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH1cbiAgICAvLyBPdXIgbG9naW4gbG9naWMgZW5kcyBoZXJlXG4gIH0pO1xuICBcbiAgLy8gLi4uXG4gIFxuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDLGVBQWUsQ0FBQztBQUNyQyxNQUFNQyxPQUFPLEdBQUdELE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUUsTUFBTSxHQUFHRCxPQUFPLENBQUNFLE1BQU0sRUFBRTtBQUMvQixNQUFNQyxNQUFNLEdBQUdKLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDaEMsTUFBTUssR0FBRyxHQUFHTCxPQUFPLENBQUMsY0FBYyxDQUFDO0FBQ25DLE1BQU1NLE1BQU0sR0FBR04sT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUNoQztBQUNBOztBQUVBRSxNQUFNLENBQUNLLElBQUksQ0FBQyxXQUFXLEVBQUUsT0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDekM7O0VBRUEsSUFBSTtJQUNGO0lBQ0FDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLFVBQVUsRUFBQ0gsR0FBRyxDQUFDSSxJQUFJLENBQUM7SUFDaEMsTUFBTTtNQUFFQyxJQUFJO01BQUVDLEtBQUs7TUFB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","map":{"version":3,"names":["User","require","express","router","Router","bcrypt","jwt","qrcode","post","req","res","console","log","body","name","email","password","type","status","send","oldUser","findOne","encryptedPassword","hash","user","create","toLowerCase","token","sign","user_id","_id","process","env","TOKEN_KEY","expiresIn","json","err","compare","module","exports"],"sourceRoot":"/Users/prashant/Desktop/social-backend/routes/","sources":["auth.js"],"sourcesContent":["const User = require(\"../model/user\");\nconst express = require('express')\nconst router = express.Router();\nconst bcrypt = require('bcrypt')\nconst jwt = require(\"jsonwebtoken\");\nconst qrcode = require(\"qrcode\");\n// Register\n// ...\n\nrouter.post(\"/register\", async (req, res) => {\n    // Our register logic starts here\n  \n    try {\n      // Get user input\n      console.log('req.body',req.body)\n      const { name, email, password, type } = req.body;\n  \n      // Validate user input\n      if (!(email && password &&  name )) {\n        res.status(400).send({\"message\":\"All input is required\"});\n      }\n  \n      // check if user already exist\n      // Validate if user exist in our database\n      const oldUser = await User.findOne({ email });\n  \n      if (oldUser) {\n        return res.status(409).send(\"User Already Exist. Please Login\");\n      }\n  \n      // Encrypt user password\n      let encryptedPassword = await bcrypt.hash(password, 10);\n  \n      // Create user in our database\n      const user = await User.create({\n        name,\n        email: email.toLowerCase(), // sanitize: convert email to lowercase\n        password: encryptedPassword,\n        type\n      });\n  \n      // Create token\n      const token = jwt.sign(\n        { user_id: user._id, email },\n        process.env.TOKEN_KEY,\n        {\n          expiresIn: \"2h\",\n        }\n      );\n  \n      // return new user\n      res.status(201).json({ token });\n    } catch (err) {\n      console.log(err);\n    }\n    // Our register logic ends here\n  });\n  \n  // ...\n  ;\n\n// Login\n// ...\n\nrouter.post(\"/login\", async (req, res) => {\n    // Our login logic starts here\n    try {\n      // Get user input\n      const { email, password } = req.body;\n  \n      // Validate user input\n      if (!(email && password)) {\n        res.status(400).json({\"message\":\"All input is required\"});\n      }\n  \n      // Validate if user exist in our database\n      const user = await User.findOne({ email });\n  \n      if (user && (await bcrypt.compare(password, user.password))) {\n        // Create token\n        const token = jwt.sign(\n          { user_id: user._id, email },\n          process.env.TOKEN_KEY,\n          {\n            expiresIn: \"2h\",\n          }\n        );\n  \n        // save user token\n        user.token = token;\n  \n        // user\n        return res.status(200).json({ token });\n      }\n      return res.status(400).send(\"Invalid Credentials\");\n    } catch (err) {\n      console.log(err);\n    }\n    // Our login logic ends here\n  });\n  \n  // ...\n  \n\nmodule.exports = router;"],"mappings":"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"}},"mtime":1668204155279},"{\"assumptions\":{},\"sourceRoot\":\"/Users/prashant/Desktop/social-backend/model/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/prashant/Desktop/social-backend\",\"filename\":\"/Users/prashant/Desktop/social-backend/model/user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/prashant/Desktop/social-backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.20.2:development":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst userSchema = new mongoose.Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    unique: true,\n    required: true\n  },\n  phoneNumber: {\n    type: String,\n    default: null\n  },\n  password: {\n    type: String,\n    required: true\n  },\n  type: {\n    type: String,\n    required: true\n  }\n}, {\n  timestamps: {\n    createdAt: 'created_at',\n    updatedAt: 'updated_at'\n  }\n});\nmodule.exports = mongoose.model(\"user\", userSchema);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJ1c2VyU2NoZW1hIiwiU2NoZW1hIiwibmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsImVtYWlsIiwidW5pcXVlIiwicGhvbmVOdW1iZXIiLCJkZWZhdWx0IiwicGFzc3dvcmQiLCJ0aW1lc3RhbXBzIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwibW9kdWxlIiwiZXhwb3J0cyIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcHJhc2hhbnQvRGVza3RvcC9zb2NpYWwtYmFja2VuZC9tb2RlbC8iLCJzb3VyY2VzIjpbInVzZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XG5cbmNvbnN0IHVzZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgICBuYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUsIH0sXG4gICAgZW1haWw6IHsgdHlwZTogU3RyaW5nLCB1bmlxdWU6IHRydWUsIHJlcXVpcmVkOiB0cnVlLCB9LFxuICAgIHBob25lTnVtYmVyOiB7IHR5cGU6IFN0cmluZyAsIGRlZmF1bHQ6IG51bGwgfSxcbiAgICBwYXNzd29yZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlLCB9LFxuICAgIHR5cGU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgfVxufSwgeyB0aW1lc3RhbXBzOiB7IGNyZWF0ZWRBdDogJ2NyZWF0ZWRfYXQnLCB1cGRhdGVkQXQ6ICd1cGRhdGVkX2F0JyB9IH0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG1vbmdvb3NlLm1vZGVsKFwidXNlclwiLCB1c2VyU2NoZW1hKTsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUVwQyxNQUFNQyxVQUFVLEdBQUcsSUFBSUYsUUFBUSxDQUFDRyxNQUFNLENBQUM7RUFDbkNDLElBQUksRUFBRTtJQUFFQyxJQUFJLEVBQUVDLE1BQU07SUFBRUMsUUFBUSxFQUFFO0VBQU0sQ0FBQztFQUN2Q0MsS0FBSyxFQUFFO0lBQUVILElBQUksRUFBRUMsTUFBTTtJQUFFRyxNQUFNLEVBQUUsSUFBSTtJQUFFRixRQUFRLEVBQUU7RUFBTSxDQUFDO0VBQ3RERyxXQUFXLEVBQUU7SUFBRUwsSUFBSSxFQUFFQyxNQUFNO0lBQUdLLE9BQU8sRUFBRTtFQUFLLENBQUM7RUFDN0NDLFFBQVEsRUFBRTtJQUFFUCxJQUFJLEVBQUVDLE1BQU07SUFBRUMsUUFBUSxFQUFFO0VBQU0sQ0FBQztFQUMzQ0YsSUFBSSxFQUFFO0lBQUVBLElBQUksRUFBRUMsTUFBTTtJQUFFQyxRQUFRLEVBQUU7RUFBTTtBQUMxQyxDQUFDLEVBQUU7RUFBRU0sVUFBVSxFQUFFO0lBQUVDLFNBQVMsRUFBRSxZQUFZO0lBQUVDLFNBQVMsRUFBRTtFQUFhO0FBQUUsQ0FBQyxDQUFDO0FBRXhFQyxNQUFNLENBQUNDLE9BQU8sR0FBR2pCLFFBQVEsQ0FBQ2tCLEtBQUssQ0FBQyxNQUFNLEVBQUVoQixVQUFVLENBQUMifQ==","map":{"version":3,"names":["mongoose","require","userSchema","Schema","name","type","String","required","email","unique","phoneNumber","default","password","timestamps","createdAt","updatedAt","module","exports","model"],"sourceRoot":"/Users/prashant/Desktop/social-backend/model/","sources":["user.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\n\nconst userSchema = new mongoose.Schema({\n    name: { type: String, required: true, },\n    email: { type: String, unique: true, required: true, },\n    phoneNumber: { type: String , default: null },\n    password: { type: String, required: true, },\n    type: { type: String, required: true, }\n}, { timestamps: { createdAt: 'created_at', updatedAt: 'updated_at' } });\n\nmodule.exports = mongoose.model(\"user\", userSchema);"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,UAAU,GAAG,IAAIF,QAAQ,CAACG,MAAM,CAAC;EACnCC,IAAI,EAAE;IAAEC,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAM,CAAC;EACvCC,KAAK,EAAE;IAAEH,IAAI,EAAEC,MAAM;IAAEG,MAAM,EAAE,IAAI;IAAEF,QAAQ,EAAE;EAAM,CAAC;EACtDG,WAAW,EAAE;IAAEL,IAAI,EAAEC,MAAM;IAAGK,OAAO,EAAE;EAAK,CAAC;EAC7CC,QAAQ,EAAE;IAAEP,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAM,CAAC;EAC3CF,IAAI,EAAE;IAAEA,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAM;AAC1C,CAAC,EAAE;EAAEM,UAAU,EAAE;IAAEC,SAAS,EAAE,YAAY;IAAEC,SAAS,EAAE;EAAa;AAAE,CAAC,CAAC;AAExEC,MAAM,CAACC,OAAO,GAAGjB,QAAQ,CAACkB,KAAK,CAAC,MAAM,EAAEhB,UAAU,CAAC"}},"mtime":1668204154247},"{\"assumptions\":{},\"sourceRoot\":\"/Users/prashant/Desktop/social-backend/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/prashant/Desktop/social-backend\",\"filename\":\"/Users/prashant/Desktop/social-backend/routes/qr.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/prashant/Desktop/social-backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.20.2:development":{"value":{"code":"const User = require(\"../model/user\");\nconst QRCode = require(\"../model/qrCode\");\nconst ConnectedDevice = require(\"../model/connectedDevice\");\nconst express = require('express');\nconst router = express.Router();\nconst jwt = require(\"jsonwebtoken\");\nconst QR = require(\"qrcode\");\nvar ObjectId = require('mongoose').Types.ObjectId;\nrouter.post(\"/generate\", async (req, res) => {\n  try {\n    console.log('body', req.body);\n    const {\n      userId\n    } = req.body;\n    console.log('userId', userId, req.body.userId);\n    // Validate user input\n    if (!userId) {\n      res.status(400).send(\"User Id is required\");\n    }\n    const user = await User.findById(userId);\n\n    // Validate is user exist\n    if (!user) {\n      res.status(400).send(\"User not found\");\n    }\n    const qrExist = await QRCode.findOne({\n      userId\n    });\n\n    // If qr exist, update disable to true and then create a new qr record\n    if (!qrExist) {\n      await QRCode.create({\n        userId\n      });\n    } else {\n      await QRCode.findOneAndUpdate({\n        userId\n      }, {\n        $set: {\n          disabled: true\n        }\n      });\n      await QRCode.create({\n        userId\n      });\n    }\n\n    // Generate encrypted data\n    const encryptedData = jwt.sign({\n      userId: user._id,\n      email: user.email\n    }, process.env.TOKEN_KEY, {\n      expiresIn: \"1d\"\n    });\n\n    // Generate qr code\n    const dataImage = await QR.toDataURL(encryptedData);\n\n    // Return qr code\n    return res.status(200).json({\n      dataImage\n    });\n  } catch (err) {\n    console.log(err);\n  }\n});\nrouter.post(\"/scan\", async (req, res) => {\n  try {\n    const {\n      token,\n      deviceInformation\n    } = req.body;\n    if (!token && !deviceInformation) {\n      res.status(400).send(\"Token and deviceInformation is required\");\n    }\n    const decoded = jwt.verify(token, process.env.TOKEN_KEY);\n    console.log('decoded', decoded);\n    const qrCode = await QRCode.findOne({\n      userId: decoded.user_id,\n      disabled: false\n    });\n    //   const qrCode = await QRCode.findOne({\n    //     userId: new ObjectId(decoded.user_id),\n    //     disabled: false,\n    //   });\n\n    if (!qrCode) {\n      res.status(400).send(\"QR Code not found\");\n    }\n    console.log('qrCode', qrCode);\n    const connectedDeviceData = {\n      userId: decoded.user_id,\n      qrCodeId: qrCode._id,\n      deviceName: deviceInformation.deviceName,\n      deviceModel: deviceInformation.deviceModel,\n      deviceOS: deviceInformation.deviceOS,\n      deviceVersion: deviceInformation.deviceVersion\n    };\n    const connectedDevice = await ConnectedDevice.create(connectedDeviceData);\n\n    // Update qr code\n    await QRCode.findOneAndUpdate({\n      _id: qrCode._id\n    }, {\n      isActive: true,\n      connectedDeviceId: connectedDevice._id,\n      lastUsedDate: new Date()\n    });\n\n    // Find user\n    const user = await User.findById(decoded.user_id);\n\n    // Create token\n    const authToken = jwt.sign({\n      user_id: user._id\n    }, process.env.TOKEN_KEY, {\n      expiresIn: \"2h\"\n    });\n\n    // Return token\n    return res.status(200).json({\n      token: authToken\n    });\n  } catch (err) {\n    console.log(err);\n  }\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVc2VyIiwicmVxdWlyZSIsIlFSQ29kZSIsIkNvbm5lY3RlZERldmljZSIsImV4cHJlc3MiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJqd3QiLCJRUiIsIk9iamVjdElkIiwiVHlwZXMiLCJwb3N0IiwicmVxIiwicmVzIiwiY29uc29sZSIsImxvZyIsImJvZHkiLCJ1c2VySWQiLCJzdGF0dXMiLCJzZW5kIiwidXNlciIsImZpbmRCeUlkIiwicXJFeGlzdCIsImZpbmRPbmUiLCJjcmVhdGUiLCJmaW5kT25lQW5kVXBkYXRlIiwiJHNldCIsImRpc2FibGVkIiwiZW5jcnlwdGVkRGF0YSIsInNpZ24iLCJfaWQiLCJlbWFpbCIsInByb2Nlc3MiLCJlbnYiLCJUT0tFTl9LRVkiLCJleHBpcmVzSW4iLCJkYXRhSW1hZ2UiLCJ0b0RhdGFVUkwiLCJqc29uIiwiZXJyIiwidG9rZW4iLCJkZXZpY2VJbmZvcm1hdGlvbiIsImRlY29kZWQiLCJ2ZXJpZnkiLCJxckNvZGUiLCJ1c2VyX2lkIiwiY29ubmVjdGVkRGV2aWNlRGF0YSIsInFyQ29kZUlkIiwiZGV2aWNlTmFtZSIsImRldmljZU1vZGVsIiwiZGV2aWNlT1MiLCJkZXZpY2VWZXJzaW9uIiwiY29ubmVjdGVkRGV2aWNlIiwiaXNBY3RpdmUiLCJjb25uZWN0ZWREZXZpY2VJZCIsImxhc3RVc2VkRGF0ZSIsIkRhdGUiLCJhdXRoVG9rZW4iLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcHJhc2hhbnQvRGVza3RvcC9zb2NpYWwtYmFja2VuZC9yb3V0ZXMvIiwic291cmNlcyI6WyJxci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBVc2VyID0gcmVxdWlyZShcIi4uL21vZGVsL3VzZXJcIik7XG5jb25zdCBRUkNvZGUgPSByZXF1aXJlKFwiLi4vbW9kZWwvcXJDb2RlXCIpO1xuY29uc3QgQ29ubmVjdGVkRGV2aWNlID0gcmVxdWlyZShcIi4uL21vZGVsL2Nvbm5lY3RlZERldmljZVwiKTtcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJylcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5jb25zdCBqd3QgPSByZXF1aXJlKFwianNvbndlYnRva2VuXCIpO1xuY29uc3QgUVIgPSByZXF1aXJlKFwicXJjb2RlXCIpO1xudmFyIE9iamVjdElkID0gcmVxdWlyZSgnbW9uZ29vc2UnKS5UeXBlcy5PYmplY3RJZDtcblxucm91dGVyLnBvc3QoXCIvZ2VuZXJhdGVcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coJ2JvZHknLHJlcS5ib2R5KVxuICAgICAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLmJvZHk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd1c2VySWQnLHVzZXJJZCwgcmVxLmJvZHkudXNlcklkKVxuICAgICAgICAvLyBWYWxpZGF0ZSB1c2VyIGlucHV0XG4gICAgICAgIGlmICghdXNlcklkKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuc2VuZChcIlVzZXIgSWQgaXMgcmVxdWlyZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh1c2VySWQpO1xuXG4gICAgICAgIC8vIFZhbGlkYXRlIGlzIHVzZXIgZXhpc3RcbiAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuc2VuZChcIlVzZXIgbm90IGZvdW5kXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcXJFeGlzdCA9IGF3YWl0IFFSQ29kZS5maW5kT25lKHsgdXNlcklkIH0pO1xuXG4gICAgICAgIC8vIElmIHFyIGV4aXN0LCB1cGRhdGUgZGlzYWJsZSB0byB0cnVlIGFuZCB0aGVuIGNyZWF0ZSBhIG5ldyBxciByZWNvcmRcbiAgICAgICAgaWYgKCFxckV4aXN0KSB7XG4gICAgICAgICAgICBhd2FpdCBRUkNvZGUuY3JlYXRlKHsgdXNlcklkIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgUVJDb2RlLmZpbmRPbmVBbmRVcGRhdGUoeyB1c2VySWQgfSwgeyAkc2V0OiB7IGRpc2FibGVkOiB0cnVlIH0gfSk7XG4gICAgICAgICAgICBhd2FpdCBRUkNvZGUuY3JlYXRlKHsgdXNlcklkIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gR2VuZXJhdGUgZW5jcnlwdGVkIGRhdGFcbiAgICAgICAgY29uc3QgZW5jcnlwdGVkRGF0YSA9IGp3dC5zaWduKFxuICAgICAgICAgICAgeyB1c2VySWQ6IHVzZXIuX2lkLCBlbWFpbDogdXNlci5lbWFpbCB9LFxuICAgICAgICAgICAgcHJvY2Vzcy5lbnYuVE9LRU5fS0VZLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGV4cGlyZXNJbjogXCIxZFwiLFxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIEdlbmVyYXRlIHFyIGNvZGVcbiAgICAgICAgY29uc3QgZGF0YUltYWdlID0gYXdhaXQgUVIudG9EYXRhVVJMKGVuY3J5cHRlZERhdGEpO1xuXG4gICAgICAgIC8vIFJldHVybiBxciBjb2RlXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IGRhdGFJbWFnZSB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9XG59KTtcblxucm91dGVyLnBvc3QoXCIvc2NhblwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyB0b2tlbiwgZGV2aWNlSW5mb3JtYXRpb24gfSA9IHJlcS5ib2R5O1xuICBcbiAgICAgIGlmICghdG9rZW4gJiYgIWRldmljZUluZm9ybWF0aW9uKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5zZW5kKFwiVG9rZW4gYW5kIGRldmljZUluZm9ybWF0aW9uIGlzIHJlcXVpcmVkXCIpO1xuICAgICAgfVxuICBcbiAgICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5UT0tFTl9LRVkpO1xuICAgICAgY29uc29sZS5sb2coJ2RlY29kZWQnLGRlY29kZWQpXG4gICAgICBjb25zdCBxckNvZGUgPSBhd2FpdCBRUkNvZGUuZmluZE9uZSh7XG4gICAgICAgIHVzZXJJZDogZGVjb2RlZC51c2VyX2lkLFxuICAgICAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgICB9KTtcbiAgICAvLyAgIGNvbnN0IHFyQ29kZSA9IGF3YWl0IFFSQ29kZS5maW5kT25lKHtcbiAgICAvLyAgICAgdXNlcklkOiBuZXcgT2JqZWN0SWQoZGVjb2RlZC51c2VyX2lkKSxcbiAgICAvLyAgICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgIC8vICAgfSk7XG4gIFxuICAgICAgaWYgKCFxckNvZGUpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLnNlbmQoXCJRUiBDb2RlIG5vdCBmb3VuZFwiKTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKCdxckNvZGUnLCBxckNvZGUpXG4gICAgICBjb25zdCBjb25uZWN0ZWREZXZpY2VEYXRhID0ge1xuICAgICAgICB1c2VySWQ6IGRlY29kZWQudXNlcl9pZCxcbiAgICAgICAgcXJDb2RlSWQ6IHFyQ29kZS5faWQsXG4gICAgICAgIGRldmljZU5hbWU6IGRldmljZUluZm9ybWF0aW9uLmRldmljZU5hbWUsXG4gICAgICAgIGRldmljZU1vZGVsOiBkZXZpY2VJbmZvcm1hdGlvbi5kZXZpY2VNb2RlbCxcbiAgICAgICAgZGV2aWNlT1M6IGRldmljZUluZm9ybWF0aW9uLmRldmljZU9TLFxuICAgICAgICBkZXZpY2VWZXJzaW9uOiBkZXZpY2VJbmZvcm1hdGlvbi5kZXZpY2VWZXJzaW9uLFxuICAgICAgfTtcbiAgXG4gICAgICBjb25zdCBjb25uZWN0ZWREZXZpY2UgPSBhd2FpdCBDb25uZWN0ZWREZXZpY2UuY3JlYXRlKGNvbm5lY3RlZERldmljZURhdGEpO1xuICBcbiAgICAgIC8vIFVwZGF0ZSBxciBjb2RlXG4gICAgICBhd2FpdCBRUkNvZGUuZmluZE9uZUFuZFVwZGF0ZShcbiAgICAgICAgeyBfaWQ6IHFyQ29kZS5faWQgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICAgIGNvbm5lY3RlZERldmljZUlkOiBjb25uZWN0ZWREZXZpY2UuX2lkLFxuICAgICAgICAgIGxhc3RVc2VkRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgICAgfVxuICAgICAgKTtcbiAgXG4gICAgICAvLyBGaW5kIHVzZXJcbiAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKGRlY29kZWQudXNlcl9pZCk7XG4gIFxuICAgICAgLy8gQ3JlYXRlIHRva2VuXG4gICAgICBjb25zdCBhdXRoVG9rZW4gPSBqd3Quc2lnbih7IHVzZXJfaWQ6IHVzZXIuX2lkIH0sIHByb2Nlc3MuZW52LlRPS0VOX0tFWSwge1xuICAgICAgICBleHBpcmVzSW46IFwiMmhcIixcbiAgICAgIH0pO1xuICBcbiAgICAgIC8vIFJldHVybiB0b2tlblxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdG9rZW46IGF1dGhUb2tlbiB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfVxuICB9KTtcbiAgXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDLGVBQWUsQ0FBQztBQUNyQyxNQUFNQyxNQUFNLEdBQUdELE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztBQUN6QyxNQUFNRSxlQUFlLEdBQUdGLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQztBQUMzRCxNQUFNRyxPQUFPLEdBQUdILE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUksTUFBTSxHQUFHRCxPQUFPLENBQUNFLE1BQU0sRUFBRTtBQUMvQixNQUFNQyxHQUFHLEdBQUdOLE9BQU8s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","map":{"version":3,"names":["User","require","QRCode","ConnectedDevice","express","router","Router","jwt","QR","ObjectId","Types","post","req","res","console","log","body","userId","status","send","user","findById","qrExist","findOne","create","findOneAndUpdate","$set","disabled","encryptedData","sign","_id","email","process","env","TOKEN_KEY","expiresIn","dataImage","toDataURL","json","err","token","deviceInformation","decoded","verify","qrCode","user_id","connectedDeviceData","qrCodeId","deviceName","deviceModel","deviceOS","deviceVersion","connectedDevice","isActive","connectedDeviceId","lastUsedDate","Date","authToken","module","exports"],"sourceRoot":"/Users/prashant/Desktop/social-backend/routes/","sources":["qr.js"],"sourcesContent":["const User = require(\"../model/user\");\nconst QRCode = require(\"../model/qrCode\");\nconst ConnectedDevice = require(\"../model/connectedDevice\");\nconst express = require('express')\nconst router = express.Router();\nconst jwt = require(\"jsonwebtoken\");\nconst QR = require(\"qrcode\");\nvar ObjectId = require('mongoose').Types.ObjectId;\n\nrouter.post(\"/generate\", async (req, res) => {\n    try {\n        console.log('body',req.body)\n        const { userId } = req.body;\n        console.log('userId',userId, req.body.userId)\n        // Validate user input\n        if (!userId) {\n            res.status(400).send(\"User Id is required\");\n        }\n\n        const user = await User.findById(userId);\n\n        // Validate is user exist\n        if (!user) {\n            res.status(400).send(\"User not found\");\n        }\n\n        const qrExist = await QRCode.findOne({ userId });\n\n        // If qr exist, update disable to true and then create a new qr record\n        if (!qrExist) {\n            await QRCode.create({ userId });\n        } else {\n            await QRCode.findOneAndUpdate({ userId }, { $set: { disabled: true } });\n            await QRCode.create({ userId });\n        }\n\n        // Generate encrypted data\n        const encryptedData = jwt.sign(\n            { userId: user._id, email: user.email },\n            process.env.TOKEN_KEY,\n            {\n                expiresIn: \"1d\",\n            }\n        );\n\n        // Generate qr code\n        const dataImage = await QR.toDataURL(encryptedData);\n\n        // Return qr code\n        return res.status(200).json({ dataImage });\n    } catch (err) {\n        console.log(err);\n    }\n});\n\nrouter.post(\"/scan\", async (req, res) => {\n    try {\n      const { token, deviceInformation } = req.body;\n  \n      if (!token && !deviceInformation) {\n        res.status(400).send(\"Token and deviceInformation is required\");\n      }\n  \n      const decoded = jwt.verify(token, process.env.TOKEN_KEY);\n      console.log('decoded',decoded)\n      const qrCode = await QRCode.findOne({\n        userId: decoded.user_id,\n        disabled: false,\n      });\n    //   const qrCode = await QRCode.findOne({\n    //     userId: new ObjectId(decoded.user_id),\n    //     disabled: false,\n    //   });\n  \n      if (!qrCode) {\n        res.status(400).send(\"QR Code not found\");\n      }\n      console.log('qrCode', qrCode)\n      const connectedDeviceData = {\n        userId: decoded.user_id,\n        qrCodeId: qrCode._id,\n        deviceName: deviceInformation.deviceName,\n        deviceModel: deviceInformation.deviceModel,\n        deviceOS: deviceInformation.deviceOS,\n        deviceVersion: deviceInformation.deviceVersion,\n      };\n  \n      const connectedDevice = await ConnectedDevice.create(connectedDeviceData);\n  \n      // Update qr code\n      await QRCode.findOneAndUpdate(\n        { _id: qrCode._id },\n        {\n          isActive: true,\n          connectedDeviceId: connectedDevice._id,\n          lastUsedDate: new Date(),\n        }\n      );\n  \n      // Find user\n      const user = await User.findById(decoded.user_id);\n  \n      // Create token\n      const authToken = jwt.sign({ user_id: user._id }, process.env.TOKEN_KEY, {\n        expiresIn: \"2h\",\n      });\n  \n      // Return token\n      return res.status(200).json({ token: authToken });\n    } catch (err) {\n      console.log(err);\n    }\n  });\n  \nmodule.exports = router;"],"mappings":"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"}},"mtime":1668204155280},"{\"assumptions\":{},\"sourceRoot\":\"/Users/prashant/Desktop/social-backend/model/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/prashant/Desktop/social-backend\",\"filename\":\"/Users/prashant/Desktop/social-backend/model/qrCode.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/prashant/Desktop/social-backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.20.2:development":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst {\n  Schema\n} = mongoose;\nconst qrCodeSchema = new mongoose.Schema({\n  userId: {\n    type: Schema.Types.ObjectId,\n    required: true,\n    ref: \"users\"\n  },\n  connectedDeviceId: {\n    type: Schema.Types.ObjectId,\n    ref: \"connectedDevices\"\n  },\n  lastUsedDate: {\n    type: Date,\n    default: null\n  },\n  isActive: {\n    type: Boolean,\n    default: false\n  },\n  disabled: {\n    type: Boolean,\n    default: false\n  }\n});\nmodule.exports = mongoose.model(\"qrCode\", qrCodeSchema);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJTY2hlbWEiLCJxckNvZGVTY2hlbWEiLCJ1c2VySWQiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlcXVpcmVkIiwicmVmIiwiY29ubmVjdGVkRGV2aWNlSWQiLCJsYXN0VXNlZERhdGUiLCJEYXRlIiwiZGVmYXVsdCIsImlzQWN0aXZlIiwiQm9vbGVhbiIsImRpc2FibGVkIiwibW9kdWxlIiwiZXhwb3J0cyIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcHJhc2hhbnQvRGVza3RvcC9zb2NpYWwtYmFja2VuZC9tb2RlbC8iLCJzb3VyY2VzIjpbInFyQ29kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcbmNvbnN0IHsgU2NoZW1hIH0gPSBtb25nb29zZTtcblxuY29uc3QgcXJDb2RlU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIHVzZXJJZDoge1xuICAgIHR5cGU6IFNjaGVtYS5UeXBlcy5PYmplY3RJZCxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICByZWY6IFwidXNlcnNcIixcbiAgfSxcbiAgY29ubmVjdGVkRGV2aWNlSWQ6IHtcbiAgICB0eXBlOiBTY2hlbWEuVHlwZXMuT2JqZWN0SWQsXG4gICAgcmVmOiBcImNvbm5lY3RlZERldmljZXNcIixcbiAgfSxcbiAgbGFzdFVzZWREYXRlOiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IG51bGwgfSxcbiAgaXNBY3RpdmU6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSxcbiAgZGlzYWJsZWQ6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG1vbmdvb3NlLm1vZGVsKFwicXJDb2RlXCIsIHFyQ29kZVNjaGVtYSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUNwQyxNQUFNO0VBQUVDO0FBQU8sQ0FBQyxHQUFHRixRQUFRO0FBRTNCLE1BQU1HLFlBQVksR0FBRyxJQUFJSCxRQUFRLENBQUNFLE1BQU0sQ0FBQztFQUN2Q0UsTUFBTSxFQUFFO0lBQ05DLElBQUksRUFBRUgsTUFBTSxDQUFDSSxLQUFLLENBQUNDLFFBQVE7SUFDM0JDLFFBQVEsRUFBRSxJQUFJO0lBQ2RDLEdBQUcsRUFBRTtFQUNQLENBQUM7RUFDREMsaUJBQWlCLEVBQUU7SUFDakJMLElBQUksRUFBRUgsTUFBTSxDQUFDSSxLQUFLLENBQUNDLFFBQVE7SUFDM0JFLEdBQUcsRUFBRTtFQUNQLENBQUM7RUFDREUsWUFBWSxFQUFFO0lBQUVOLElBQUksRUFBRU8sSUFBSTtJQUFFQyxPQUFPLEVBQUU7RUFBSyxDQUFDO0VBQzNDQyxRQUFRLEVBQUU7SUFBRVQsSUFBSSxFQUFFVSxPQUFPO0lBQUVGLE9BQU8sRUFBRTtFQUFNLENBQUM7RUFDM0NHLFFBQVEsRUFBRTtJQUFFWCxJQUFJLEVBQUVVLE9BQU87SUFBRUYsT0FBTyxFQUFFO0VBQU07QUFDNUMsQ0FBQyxDQUFDO0FBRUZJLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHbEIsUUFBUSxDQUFDbUIsS0FBSyxDQUFDLFFBQVEsRUFBRWhCLFlBQVksQ0FBQyJ9","map":{"version":3,"names":["mongoose","require","Schema","qrCodeSchema","userId","type","Types","ObjectId","required","ref","connectedDeviceId","lastUsedDate","Date","default","isActive","Boolean","disabled","module","exports","model"],"sourceRoot":"/Users/prashant/Desktop/social-backend/model/","sources":["qrCode.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\nconst { Schema } = mongoose;\n\nconst qrCodeSchema = new mongoose.Schema({\n  userId: {\n    type: Schema.Types.ObjectId,\n    required: true,\n    ref: \"users\",\n  },\n  connectedDeviceId: {\n    type: Schema.Types.ObjectId,\n    ref: \"connectedDevices\",\n  },\n  lastUsedDate: { type: Date, default: null },\n  isActive: { type: Boolean, default: false },\n  disabled: { type: Boolean, default: false },\n});\n\nmodule.exports = mongoose.model(\"qrCode\", qrCodeSchema);\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AACpC,MAAM;EAAEC;AAAO,CAAC,GAAGF,QAAQ;AAE3B,MAAMG,YAAY,GAAG,IAAIH,QAAQ,CAACE,MAAM,CAAC;EACvCE,MAAM,EAAE;IACNC,IAAI,EAAEH,MAAM,CAACI,KAAK,CAACC,QAAQ;IAC3BC,QAAQ,EAAE,IAAI;IACdC,GAAG,EAAE;EACP,CAAC;EACDC,iBAAiB,EAAE;IACjBL,IAAI,EAAEH,MAAM,CAACI,KAAK,CAACC,QAAQ;IAC3BE,GAAG,EAAE;EACP,CAAC;EACDE,YAAY,EAAE;IAAEN,IAAI,EAAEO,IAAI;IAAEC,OAAO,EAAE;EAAK,CAAC;EAC3CC,QAAQ,EAAE;IAAET,IAAI,EAAEU,OAAO;IAAEF,OAAO,EAAE;EAAM,CAAC;EAC3CG,QAAQ,EAAE;IAAEX,IAAI,EAAEU,OAAO;IAAEF,OAAO,EAAE;EAAM;AAC5C,CAAC,CAAC;AAEFI,MAAM,CAACC,OAAO,GAAGlB,QAAQ,CAACmB,KAAK,CAAC,QAAQ,EAAEhB,YAAY,CAAC"}},"mtime":1668204154246},"{\"assumptions\":{},\"sourceRoot\":\"/Users/prashant/Desktop/social-backend/model/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/prashant/Desktop/social-backend\",\"filename\":\"/Users/prashant/Desktop/social-backend/model/connectedDevice.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/prashant/Desktop/social-backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.20.2:development":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst {\n  Schema\n} = mongoose;\nconst connectedDeviceSchema = new mongoose.Schema({\n  userId: {\n    type: Schema.Types.ObjectId,\n    required: true,\n    ref: \"users\"\n  },\n  qrCodeId: {\n    type: Schema.Types.ObjectId,\n    required: true,\n    ref: \"qrCodes\"\n  },\n  deviceName: {\n    type: String,\n    default: null\n  },\n  deviceModel: {\n    type: String,\n    default: null\n  },\n  deviceOS: {\n    type: String,\n    default: null\n  },\n  deviceVersion: {\n    type: String,\n    default: null\n  },\n  disabled: {\n    type: Boolean,\n    default: false\n  }\n});\nmodule.exports = mongoose.model(\"connectedDevice\", connectedDeviceSchema);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJTY2hlbWEiLCJjb25uZWN0ZWREZXZpY2VTY2hlbWEiLCJ1c2VySWQiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlcXVpcmVkIiwicmVmIiwicXJDb2RlSWQiLCJkZXZpY2VOYW1lIiwiU3RyaW5nIiwiZGVmYXVsdCIsImRldmljZU1vZGVsIiwiZGV2aWNlT1MiLCJkZXZpY2VWZXJzaW9uIiwiZGlzYWJsZWQiLCJCb29sZWFuIiwibW9kdWxlIiwiZXhwb3J0cyIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcHJhc2hhbnQvRGVza3RvcC9zb2NpYWwtYmFja2VuZC9tb2RlbC8iLCJzb3VyY2VzIjpbImNvbm5lY3RlZERldmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcbmNvbnN0IHsgU2NoZW1hIH0gPSBtb25nb29zZTtcblxuY29uc3QgY29ubmVjdGVkRGV2aWNlU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIHVzZXJJZDoge1xuICAgIHR5cGU6IFNjaGVtYS5UeXBlcy5PYmplY3RJZCxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICByZWY6IFwidXNlcnNcIixcbiAgfSxcbiAgcXJDb2RlSWQ6IHtcbiAgICB0eXBlOiBTY2hlbWEuVHlwZXMuT2JqZWN0SWQsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgcmVmOiBcInFyQ29kZXNcIixcbiAgfSxcbiAgZGV2aWNlTmFtZTogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IG51bGwgfSxcbiAgZGV2aWNlTW9kZWw6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiBudWxsIH0sXG4gIGRldmljZU9TOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogbnVsbCB9LFxuICBkZXZpY2VWZXJzaW9uOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogbnVsbCB9LFxuICBkaXNhYmxlZDogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gbW9uZ29vc2UubW9kZWwoXCJjb25uZWN0ZWREZXZpY2VcIiwgY29ubmVjdGVkRGV2aWNlU2NoZW1hKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ3BDLE1BQU07RUFBRUM7QUFBTyxDQUFDLEdBQUdGLFFBQVE7QUFFM0IsTUFBTUcscUJBQXFCLEdBQUcsSUFBSUgsUUFBUSxDQUFDRSxNQUFNLENBQUM7RUFDaERFLE1BQU0sRUFBRTtJQUNOQyxJQUFJLEVBQUVILE1BQU0sQ0FBQ0ksS0FBSyxDQUFDQyxRQUFRO0lBQzNCQyxRQUFRLEVBQUUsSUFBSTtJQUNkQyxHQUFHLEVBQUU7RUFDUCxDQUFDO0VBQ0RDLFFBQVEsRUFBRTtJQUNSTCxJQUFJLEVBQUVILE1BQU0sQ0FBQ0ksS0FBSyxDQUFDQyxRQUFRO0lBQzNCQyxRQUFRLEVBQUUsSUFBSTtJQUNkQyxHQUFHLEVBQUU7RUFDUCxDQUFDO0VBQ0RFLFVBQVUsRUFBRTtJQUFFTixJQUFJLEVBQUVPLE1BQU07SUFBRUMsT0FBTyxFQUFFO0VBQUssQ0FBQztFQUMzQ0MsV0FBVyxFQUFFO0lBQUVULElBQUksRUFBRU8sTUFBTTtJQUFFQyxPQUFPLEVBQUU7RUFBSyxDQUFDO0VBQzVDRSxRQUFRLEVBQUU7SUFBRVYsSUFBSSxFQUFFTyxNQUFNO0lBQUVDLE9BQU8sRUFBRTtFQUFLLENBQUM7RUFDekNHLGFBQWEsRUFBRTtJQUFFWCxJQUFJLEVBQUVPLE1BQU07SUFBRUMsT0FBTyxFQUFFO0VBQUssQ0FBQztFQUM5Q0ksUUFBUSxFQUFFO0lBQUVaLElBQUksRUFBRWEsT0FBTztJQUFFTCxPQUFPLEVBQUU7RUFBTTtBQUM1QyxDQUFDLENBQUM7QUFFRk0sTUFBTSxDQUFDQyxPQUFPLEdBQUdwQixRQUFRLENBQUNxQixLQUFLLENBQUMsaUJBQWlCLEVBQUVsQixxQkFBcUIsQ0FBQyJ9","map":{"version":3,"names":["mongoose","require","Schema","connectedDeviceSchema","userId","type","Types","ObjectId","required","ref","qrCodeId","deviceName","String","default","deviceModel","deviceOS","deviceVersion","disabled","Boolean","module","exports","model"],"sourceRoot":"/Users/prashant/Desktop/social-backend/model/","sources":["connectedDevice.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\nconst { Schema } = mongoose;\n\nconst connectedDeviceSchema = new mongoose.Schema({\n  userId: {\n    type: Schema.Types.ObjectId,\n    required: true,\n    ref: \"users\",\n  },\n  qrCodeId: {\n    type: Schema.Types.ObjectId,\n    required: true,\n    ref: \"qrCodes\",\n  },\n  deviceName: { type: String, default: null },\n  deviceModel: { type: String, default: null },\n  deviceOS: { type: String, default: null },\n  deviceVersion: { type: String, default: null },\n  disabled: { type: Boolean, default: false },\n});\n\nmodule.exports = mongoose.model(\"connectedDevice\", connectedDeviceSchema);\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AACpC,MAAM;EAAEC;AAAO,CAAC,GAAGF,QAAQ;AAE3B,MAAMG,qBAAqB,GAAG,IAAIH,QAAQ,CAACE,MAAM,CAAC;EAChDE,MAAM,EAAE;IACNC,IAAI,EAAEH,MAAM,CAACI,KAAK,CAACC,QAAQ;IAC3BC,QAAQ,EAAE,IAAI;IACdC,GAAG,EAAE;EACP,CAAC;EACDC,QAAQ,EAAE;IACRL,IAAI,EAAEH,MAAM,CAACI,KAAK,CAACC,QAAQ;IAC3BC,QAAQ,EAAE,IAAI;IACdC,GAAG,EAAE;EACP,CAAC;EACDE,UAAU,EAAE;IAAEN,IAAI,EAAEO,MAAM;IAAEC,OAAO,EAAE;EAAK,CAAC;EAC3CC,WAAW,EAAE;IAAET,IAAI,EAAEO,MAAM;IAAEC,OAAO,EAAE;EAAK,CAAC;EAC5CE,QAAQ,EAAE;IAAEV,IAAI,EAAEO,MAAM;IAAEC,OAAO,EAAE;EAAK,CAAC;EACzCG,aAAa,EAAE;IAAEX,IAAI,EAAEO,MAAM;IAAEC,OAAO,EAAE;EAAK,CAAC;EAC9CI,QAAQ,EAAE;IAAEZ,IAAI,EAAEa,OAAO;IAAEL,OAAO,EAAE;EAAM;AAC5C,CAAC,CAAC;AAEFM,MAAM,CAACC,OAAO,GAAGpB,QAAQ,CAACqB,KAAK,CAAC,iBAAiB,EAAElB,qBAAqB,CAAC"}},"mtime":1668204154246},"{\"assumptions\":{},\"sourceRoot\":\"/Users/prashant/Desktop/social-backend/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/prashant/Desktop/social-backend\",\"filename\":\"/Users/prashant/Desktop/social-backend/routes/order.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/prashant/Desktop/social-backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.20.2:development":{"value":{"code":"const User = require(\"../model/user\");\nconst Order = require(\"../model/order\");\nconst Table = require(\"../model/table\");\nconst Seq = require(\"../model/seq\");\nconst express = require('express');\nconst router = express.Router();\nconst sse = require(\"../sse\");\n\n// const bcrypt = require('bcrypt')\n// const jwt = require(\"jsonwebtoken\");\n\n// async function getValueForNextSequence(sequenceOfName) {\n\n//     console.log('sequenceOfName', sequenceOfName)\n//     let filter = { seq_name: sequenceOfName }\n//     let updates = { $inc: { seq_val: 1 } }\n//     var sequenceDoc = await Seq.findOneAndUpdate(\n//         filter,\n//         updates,\n//         { returnOriginal: false }\n//     );\n//     console.log('sequenceDoc', sequenceDoc)\n//     return sequenceDoc.seq_val;\n// }\n\nrouter.get(\"/test\", async (req, res) => {\n  try {\n    res.status(201);\n  } catch (err) {\n    console.log(err);\n    res.status(500).json({\n      message: \"Server Error\"\n    });\n  }\n});\nrouter.get(\"/orderid/:id\", async (req, res) => {\n  const query = {\n    orderId: req.params.id\n  };\n  try {\n    const order = await Order.findOne(query);\n    res.status(201).json({\n      order\n    });\n  } catch (err) {\n    console.log(err);\n    res.status(500).json({\n      message: \"Server Error\"\n    });\n  }\n});\nrouter.post(\"/createOrder\", async (req, res) => {\n  try {\n    let {\n      orderItems,\n      email,\n      orderStatus,\n      paymentStatus,\n      orderType,\n      orderAmount,\n      tableNumber\n    } = req.body;\n    const order = await Order.create({\n      orderItems,\n      email,\n      orderStatus,\n      paymentStatus,\n      orderType,\n      orderAmount\n    });\n    const query = {\n      tableNumber: tableNumber\n    };\n    const orderTable = await Table.findOne(query);\n    if (orderTable?.tableNumber != tableNumber) {\n      res.status(500).json({\n        message: \"Cannot place an order because of invalid table number\"\n      });\n    } else {\n      await Table.updateOne({\n        tableNumber: tableNumber\n      }, {\n        $set: {\n          currentOrders: {\n            orderItems,\n            email,\n            orderStatus,\n            paymentStatus,\n            orderType,\n            orderAmount\n          },\n          status: 'occupied'\n        }\n      });\n      sse.send(order, \"order_created\");\n      res.status(200).json({\n        message: \"Order Placed\"\n      });\n    }\n  } catch (err) {\n    res.status(500).json(\"Server Error!\");\n    console.log(err);\n  }\n});\nrouter.get(\"/allOrders\", async (req, res) => {\n  try {\n    let data = await Order.find({\n      createdAt: \"2022-11-17T11:30:49.857Z\"\n    });\n    res.status(200).json(data);\n  } catch (err) {\n    res.status(500).json(\"Server Error!\");\n  }\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVc2VyIiwicmVxdWlyZSIsIk9yZGVyIiwiVGFibGUiLCJTZXEiLCJleHByZXNzIiwicm91dGVyIiwiUm91dGVyIiwic3NlIiwiZ2V0IiwicmVxIiwicmVzIiwic3RhdHVzIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImpzb24iLCJtZXNzYWdlIiwicXVlcnkiLCJvcmRlcklkIiwicGFyYW1zIiwiaWQiLCJvcmRlciIsImZpbmRPbmUiLCJwb3N0Iiwib3JkZXJJdGVtcyIsImVtYWlsIiwib3JkZXJTdGF0dXMiLCJwYXltZW50U3RhdHVzIiwib3JkZXJUeXBlIiwib3JkZXJBbW91bnQiLCJ0YWJsZU51bWJlciIsImJvZHkiLCJjcmVhdGUiLCJvcmRlclRhYmxlIiwidXBkYXRlT25lIiwiJHNldCIsImN1cnJlbnRPcmRlcnMiLCJzZW5kIiwiZGF0YSIsImZpbmQiLCJjcmVhdGVkQXQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcHJhc2hhbnQvRGVza3RvcC9zb2NpYWwtYmFja2VuZC9yb3V0ZXMvIiwic291cmNlcyI6WyJvcmRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBVc2VyID0gcmVxdWlyZShcIi4uL21vZGVsL3VzZXJcIik7XG5jb25zdCBPcmRlciA9IHJlcXVpcmUoXCIuLi9tb2RlbC9vcmRlclwiKTtcbmNvbnN0IFRhYmxlID0gcmVxdWlyZShcIi4uL21vZGVsL3RhYmxlXCIpO1xuY29uc3QgU2VxID0gcmVxdWlyZShcIi4uL21vZGVsL3NlcVwiKTtcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJylcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5jb25zdCBzc2UgPSByZXF1aXJlKFwiLi4vc3NlXCIpO1xuXG4vLyBjb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHQnKVxuLy8gY29uc3Qgand0ID0gcmVxdWlyZShcImpzb253ZWJ0b2tlblwiKTtcblxuLy8gYXN5bmMgZnVuY3Rpb24gZ2V0VmFsdWVGb3JOZXh0U2VxdWVuY2Uoc2VxdWVuY2VPZk5hbWUpIHtcblxuLy8gICAgIGNvbnNvbGUubG9nKCdzZXF1ZW5jZU9mTmFtZScsIHNlcXVlbmNlT2ZOYW1lKVxuLy8gICAgIGxldCBmaWx0ZXIgPSB7IHNlcV9uYW1lOiBzZXF1ZW5jZU9mTmFtZSB9XG4vLyAgICAgbGV0IHVwZGF0ZXMgPSB7ICRpbmM6IHsgc2VxX3ZhbDogMSB9IH1cbi8vICAgICB2YXIgc2VxdWVuY2VEb2MgPSBhd2FpdCBTZXEuZmluZE9uZUFuZFVwZGF0ZShcbi8vICAgICAgICAgZmlsdGVyLFxuLy8gICAgICAgICB1cGRhdGVzLFxuLy8gICAgICAgICB7IHJldHVybk9yaWdpbmFsOiBmYWxzZSB9XG4vLyAgICAgKTtcbi8vICAgICBjb25zb2xlLmxvZygnc2VxdWVuY2VEb2MnLCBzZXF1ZW5jZURvYylcbi8vICAgICByZXR1cm4gc2VxdWVuY2VEb2Muc2VxX3ZhbDtcbi8vIH1cblxucm91dGVyLmdldChcIi90ZXN0XCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuXG4gICAgdHJ5IHtcblxuICAgICAgICByZXMuc3RhdHVzKDIwMSlcblxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiU2VydmVyIEVycm9yXCIgfSk7XG4gICAgfVxufSk7XG5cbnJvdXRlci5nZXQoXCIvb3JkZXJpZC86aWRcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgcXVlcnkgPSB7IG9yZGVySWQ6IHJlcS5wYXJhbXMuaWQgfTtcblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG9yZGVyID0gYXdhaXQgT3JkZXIuZmluZE9uZShxdWVyeSk7XG5cbiAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBvcmRlciB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBcIlNlcnZlciBFcnJvclwiIH0pO1xuICAgIH1cbn0pO1xuXG5yb3V0ZXIucG9zdChcIi9jcmVhdGVPcmRlclwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBsZXQgeyBvcmRlckl0ZW1zLCBlbWFpbCwgb3JkZXJTdGF0dXMsIHBheW1lbnRTdGF0dXMsIG9yZGVyVHlwZSwgb3JkZXJBbW91bnQsIHRhYmxlTnVtYmVyIH0gPSByZXEuYm9keVxuXG4gICAgICAgIGNvbnN0IG9yZGVyID0gYXdhaXQgT3JkZXIuY3JlYXRlKHtcbiAgICAgICAgICAgIG9yZGVySXRlbXMsIGVtYWlsLCBvcmRlclN0YXR1cywgcGF5bWVudFN0YXR1cywgb3JkZXJUeXBlLCBvcmRlckFtb3VudFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcXVlcnkgPSB7IHRhYmxlTnVtYmVyOiB0YWJsZU51bWJlciB9O1xuXG4gICAgICAgIGNvbnN0IG9yZGVyVGFibGUgPSBhd2FpdCBUYWJsZS5maW5kT25lKHF1ZXJ5KTtcblxuICAgICAgICBpZiAob3JkZXJUYWJsZT8udGFibGVOdW1iZXIgIT0gdGFibGVOdW1iZXIpIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJDYW5ub3QgcGxhY2UgYW4gb3JkZXIgYmVjYXVzZSBvZiBpbnZhbGlkIHRhYmxlIG51bWJlclwiIH0pXG4gICAgICAgIH1cblxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IFRhYmxlLnVwZGF0ZU9uZSh7IHRhYmxlTnVtYmVyOiB0YWJsZU51bWJlciB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgJHNldDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE9yZGVyczogeyBvcmRlckl0ZW1zLCBlbWFpbCwgb3JkZXJTdGF0dXMsIHBheW1lbnRTdGF0dXMsIG9yZGVyVHlwZSwgb3JkZXJBbW91bnQgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ29jY3VwaWVkJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHNzZS5zZW5kKG9yZGVyLCBcIm9yZGVyX2NyZWF0ZWRcIik7XG5cbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogXCJPcmRlciBQbGFjZWRcIiB9KVxuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKFwiU2VydmVyIEVycm9yIVwiKVxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH1cbn0pO1xuXG5yb3V0ZXIuZ2V0KFwiL2FsbE9yZGVyc1wiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBsZXQgZGF0YSA9IGF3YWl0IE9yZGVyLmZpbmQoeyBjcmVhdGVkQXQ6IFwiMjAyMi0xMS0xN1QxMTozMDo0OS44NTdaXCIgfSlcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oZGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKFwiU2VydmVyIEVycm9yIVwiKVxuICAgIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDLGVBQWUsQ0FBQztBQUNyQyxNQUFNQyxLQUFLLEdBQUdELE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztBQUN2QyxNQUFNRSxLQUFLLEdBQUdGLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztBQUN2QyxNQUFNRyxHQUFHLEdBQUdILE9BQU8sQ0FBQyxjQUFjLENBQUM7QUFDbkMsTUFBTUksT0FBTyxHQUFHSixPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU1LLE1BQU0sR0FBR0QsT0FB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","map":{"version":3,"names":["User","require","Order","Table","Seq","express","router","Router","sse","get","req","res","status","err","console","log","json","message","query","orderId","params","id","order","findOne","post","orderItems","email","orderStatus","paymentStatus","orderType","orderAmount","tableNumber","body","create","orderTable","updateOne","$set","currentOrders","send","data","find","createdAt","module","exports"],"sourceRoot":"/Users/prashant/Desktop/social-backend/routes/","sources":["order.js"],"sourcesContent":["const User = require(\"../model/user\");\nconst Order = require(\"../model/order\");\nconst Table = require(\"../model/table\");\nconst Seq = require(\"../model/seq\");\nconst express = require('express')\nconst router = express.Router();\nconst sse = require(\"../sse\");\n\n// const bcrypt = require('bcrypt')\n// const jwt = require(\"jsonwebtoken\");\n\n// async function getValueForNextSequence(sequenceOfName) {\n\n//     console.log('sequenceOfName', sequenceOfName)\n//     let filter = { seq_name: sequenceOfName }\n//     let updates = { $inc: { seq_val: 1 } }\n//     var sequenceDoc = await Seq.findOneAndUpdate(\n//         filter,\n//         updates,\n//         { returnOriginal: false }\n//     );\n//     console.log('sequenceDoc', sequenceDoc)\n//     return sequenceDoc.seq_val;\n// }\n\nrouter.get(\"/test\", async (req, res) => {\n\n    try {\n\n        res.status(201)\n\n    } catch (err) {\n        console.log(err);\n        res.status(500).json({ message: \"Server Error\" });\n    }\n});\n\nrouter.get(\"/orderid/:id\", async (req, res) => {\n    const query = { orderId: req.params.id };\n\n    try {\n        const order = await Order.findOne(query);\n\n        res.status(201).json({ order });\n    } catch (err) {\n        console.log(err);\n        res.status(500).json({ message: \"Server Error\" });\n    }\n});\n\nrouter.post(\"/createOrder\", async (req, res) => {\n    try {\n        let { orderItems, email, orderStatus, paymentStatus, orderType, orderAmount, tableNumber } = req.body\n\n        const order = await Order.create({\n            orderItems, email, orderStatus, paymentStatus, orderType, orderAmount\n        });\n        const query = { tableNumber: tableNumber };\n\n        const orderTable = await Table.findOne(query);\n\n        if (orderTable?.tableNumber != tableNumber) {\n            res.status(500).json({ message: \"Cannot place an order because of invalid table number\" })\n        }\n\n        else {\n            await Table.updateOne({ tableNumber: tableNumber },\n                {\n                    $set: {\n                        currentOrders: { orderItems, email, orderStatus, paymentStatus, orderType, orderAmount },\n                        status: 'occupied'\n                    }\n                })\n            sse.send(order, \"order_created\");\n\n            res.status(200).json({ message: \"Order Placed\" })\n        }\n    } catch (err) {\n        res.status(500).json(\"Server Error!\")\n        console.log(err);\n    }\n});\n\nrouter.get(\"/allOrders\", async (req, res) => {\n    try {\n        let data = await Order.find({ createdAt: \"2022-11-17T11:30:49.857Z\" })\n        res.status(200).json(data);\n    } catch (err) {\n        res.status(500).json(\"Server Error!\")\n    }\n});\n\nmodule.exports = router;"],"mappings":"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"}},"mtime":1671588111803},"{\"assumptions\":{},\"sourceRoot\":\"/Users/prashant/Desktop/social-backend/model/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/prashant/Desktop/social-backend\",\"filename\":\"/Users/prashant/Desktop/social-backend/model/order.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/prashant/Desktop/social-backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.20.2:development":{"value":{"code":"const mongoose = require(\"mongoose\");\nrequire('dotenv').config();\nconst AutoIncrement = require('mongoose-sequence')(mongoose);\nconst orderSchema = new mongoose.Schema({\n  orderItems: {\n    type: Array,\n    default: null\n  },\n  email: {\n    type: String,\n    required: true\n  },\n  orderStatus: {\n    type: String,\n    default: null,\n    required: true\n  },\n  paymentStatus: {\n    type: String,\n    default: null,\n    required: true\n  },\n  orderType: {\n    type: String,\n    default: null\n  },\n  orderAmount: {\n    type: Number,\n    required: true\n  },\n  tableNumber: {\n    type: Number,\n    default: 1\n  }\n}, {\n  timestamps: {\n    createdAt: 'created_at',\n    updatedAt: 'updated_at'\n  }\n});\norderSchema.plugin(AutoIncrement, {\n  inc_field: 'orderId'\n});\nmodule.exports = mongoose.model(\"order\", orderSchema);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJjb25maWciLCJBdXRvSW5jcmVtZW50Iiwib3JkZXJTY2hlbWEiLCJTY2hlbWEiLCJvcmRlckl0ZW1zIiwidHlwZSIsIkFycmF5IiwiZGVmYXVsdCIsImVtYWlsIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJvcmRlclN0YXR1cyIsInBheW1lbnRTdGF0dXMiLCJvcmRlclR5cGUiLCJvcmRlckFtb3VudCIsIk51bWJlciIsInRhYmxlTnVtYmVyIiwidGltZXN0YW1wcyIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsInBsdWdpbiIsImluY19maWVsZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3ByYXNoYW50L0Rlc2t0b3Avc29jaWFsLWJhY2tlbmQvbW9kZWwvIiwic291cmNlcyI6WyJvcmRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcbnJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpXG5cbmNvbnN0IEF1dG9JbmNyZW1lbnQgPSByZXF1aXJlKCdtb25nb29zZS1zZXF1ZW5jZScpKG1vbmdvb3NlKTtcblxuY29uc3Qgb3JkZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgICBvcmRlckl0ZW1zOiB7IHR5cGU6IEFycmF5LCBkZWZhdWx0OiBudWxsIH0sXG4gICAgZW1haWw6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIG9yZGVyU3RhdHVzOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogbnVsbCwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBwYXltZW50U3RhdHVzOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogbnVsbCwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBvcmRlclR5cGU6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiBudWxsIH0sXG4gICAgb3JkZXJBbW91bnQ6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIHRhYmxlTnVtYmVyOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMSB9LFxuICAgIFxuXG59LCB7IHRpbWVzdGFtcHM6IHsgY3JlYXRlZEF0OiAnY3JlYXRlZF9hdCcsIHVwZGF0ZWRBdDogJ3VwZGF0ZWRfYXQnIH0gfSk7XG5vcmRlclNjaGVtYS5wbHVnaW4oQXV0b0luY3JlbWVudCwge2luY19maWVsZDogJ29yZGVySWQnfSk7XG5cbm1vZHVsZS5leHBvcnRzID0gbW9uZ29vc2UubW9kZWwoXCJvcmRlclwiLCBvcmRlclNjaGVtYSk7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFDcENBLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQ0MsTUFBTSxFQUFFO0FBRTFCLE1BQU1DLGFBQWEsR0FBR0YsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBQUNELFFBQVEsQ0FBQztBQUU1RCxNQUFNSSxXQUFXLEdBQUcsSUFBSUosUUFBUSxDQUFDSyxNQUFNLENBQUM7RUFDcENDLFVBQVUsRUFBRTtJQUFFQyxJQUFJLEVBQUVDLEtBQUs7SUFBRUMsT0FBTyxFQUFFO0VBQUssQ0FBQztFQUMxQ0MsS0FBSyxFQUFFO0lBQUVILElBQUksRUFBRUksTUFBTTtJQUFFQyxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQ3ZDQyxXQUFXLEVBQUU7SUFBRU4sSUFBSSxFQUFFSSxNQUFNO0lBQUVGLE9BQU8sRUFBRSxJQUFJO0lBQUVHLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDNURFLGFBQWEsRUFBRTtJQUFFUCxJQUFJLEVBQUVJLE1BQU07SUFBRUYsT0FBTyxFQUFFLElBQUk7SUFBRUcsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUM5REcsU0FBUyxFQUFFO0lBQUVSLElBQUksRUFBRUksTUFBTTtJQUFFRixPQUFPLEVBQUU7RUFBSyxDQUFDO0VBQzFDTyxXQUFXLEVBQUU7SUFBRVQsSUFBSSxFQUFFVSxNQUFNO0lBQUVMLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDN0NNLFdBQVcsRUFBRTtJQUFFWCxJQUFJLEVBQUVVLE1BQU07SUFBRVIsT0FBTyxFQUFFO0VBQUU7QUFHNUMsQ0FBQyxFQUFFO0VBQUVVLFVBQVUsRUFBRTtJQUFFQyxTQUFTLEVBQUUsWUFBWTtJQUFFQyxTQUFTLEVBQUU7RUFBYTtBQUFFLENBQUMsQ0FBQztBQUN4RWpCLFdBQVcsQ0FBQ2tCLE1BQU0sQ0FBQ25CLGFBQWEsRUFBRTtFQUFDb0IsU0FBUyxFQUFFO0FBQVMsQ0FBQyxDQUFDO0FBRXpEQyxNQUFNLENBQUNDLE9BQU8sR0FBR3pCLFFBQVEsQ0FBQzBCLEtBQUssQ0FBQyxPQUFPLEVBQUV0QixXQUFXLENBQUMifQ==","map":{"version":3,"names":["mongoose","require","config","AutoIncrement","orderSchema","Schema","orderItems","type","Array","default","email","String","required","orderStatus","paymentStatus","orderType","orderAmount","Number","tableNumber","timestamps","createdAt","updatedAt","plugin","inc_field","module","exports","model"],"sourceRoot":"/Users/prashant/Desktop/social-backend/model/","sources":["order.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\nrequire('dotenv').config()\n\nconst AutoIncrement = require('mongoose-sequence')(mongoose);\n\nconst orderSchema = new mongoose.Schema({\n    orderItems: { type: Array, default: null },\n    email: { type: String, required: true },\n    orderStatus: { type: String, default: null, required: true },\n    paymentStatus: { type: String, default: null, required: true },\n    orderType: { type: String, default: null },\n    orderAmount: { type: Number, required: true },\n    tableNumber: { type: Number, default: 1 },\n    \n\n}, { timestamps: { createdAt: 'created_at', updatedAt: 'updated_at' } });\norderSchema.plugin(AutoIncrement, {inc_field: 'orderId'});\n\nmodule.exports = mongoose.model(\"order\", orderSchema);"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AACpCA,OAAO,CAAC,QAAQ,CAAC,CAACC,MAAM,EAAE;AAE1B,MAAMC,aAAa,GAAGF,OAAO,CAAC,mBAAmB,CAAC,CAACD,QAAQ,CAAC;AAE5D,MAAMI,WAAW,GAAG,IAAIJ,QAAQ,CAACK,MAAM,CAAC;EACpCC,UAAU,EAAE;IAAEC,IAAI,EAAEC,KAAK;IAAEC,OAAO,EAAE;EAAK,CAAC;EAC1CC,KAAK,EAAE;IAAEH,IAAI,EAAEI,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EACvCC,WAAW,EAAE;IAAEN,IAAI,EAAEI,MAAM;IAAEF,OAAO,EAAE,IAAI;IAAEG,QAAQ,EAAE;EAAK,CAAC;EAC5DE,aAAa,EAAE;IAAEP,IAAI,EAAEI,MAAM;IAAEF,OAAO,EAAE,IAAI;IAAEG,QAAQ,EAAE;EAAK,CAAC;EAC9DG,SAAS,EAAE;IAAER,IAAI,EAAEI,MAAM;IAAEF,OAAO,EAAE;EAAK,CAAC;EAC1CO,WAAW,EAAE;IAAET,IAAI,EAAEU,MAAM;IAAEL,QAAQ,EAAE;EAAK,CAAC;EAC7CM,WAAW,EAAE;IAAEX,IAAI,EAAEU,MAAM;IAAER,OAAO,EAAE;EAAE;AAG5C,CAAC,EAAE;EAAEU,UAAU,EAAE;IAAEC,SAAS,EAAE,YAAY;IAAEC,SAAS,EAAE;EAAa;AAAE,CAAC,CAAC;AACxEjB,WAAW,CAACkB,MAAM,CAACnB,aAAa,EAAE;EAACoB,SAAS,EAAE;AAAS,CAAC,CAAC;AAEzDC,MAAM,CAACC,OAAO,GAAGzB,QAAQ,CAAC0B,KAAK,CAAC,OAAO,EAAEtB,WAAW,CAAC"}},"mtime":1671515521338},"{\"assumptions\":{},\"sourceRoot\":\"/Users/prashant/Desktop/social-backend/model/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/prashant/Desktop/social-backend\",\"filename\":\"/Users/prashant/Desktop/social-backend/model/table.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/prashant/Desktop/social-backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.20.2:development":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst tableSchema = new mongoose.Schema({\n  tableNumber: {\n    type: String,\n    required: true,\n    unique: true\n  },\n  capacity: {\n    type: Number,\n    required: true\n  },\n  notes: {\n    type: String,\n    default: ''\n  },\n  emailId: {\n    type: String,\n    default: null\n  },\n  currentOrders: {\n    type: Array,\n    default: null\n  },\n  status: {\n    type: String,\n    default: \"available\"\n  },\n  occupiedAt: {\n    type: Date,\n    default: null\n  }\n}, {\n  timestamps: {\n    createdAt: 'created_at',\n    updatedAt: 'updated_at'\n  }\n});\nmodule.exports = mongoose.model(\"table\", tableSchema);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJ0YWJsZVNjaGVtYSIsIlNjaGVtYSIsInRhYmxlTnVtYmVyIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidW5pcXVlIiwiY2FwYWNpdHkiLCJOdW1iZXIiLCJub3RlcyIsImRlZmF1bHQiLCJlbWFpbElkIiwiY3VycmVudE9yZGVycyIsIkFycmF5Iiwic3RhdHVzIiwib2NjdXBpZWRBdCIsIkRhdGUiLCJ0aW1lc3RhbXBzIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwibW9kdWxlIiwiZXhwb3J0cyIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcHJhc2hhbnQvRGVza3RvcC9zb2NpYWwtYmFja2VuZC9tb2RlbC8iLCJzb3VyY2VzIjpbInRhYmxlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xuXG5jb25zdCB0YWJsZVNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICAgIHRhYmxlTnVtYmVyOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUsIHVuaXF1ZTogdHJ1ZSB9LFxuICAgIGNhcGFjaXR5OiB7IHR5cGU6IE51bWJlciwgcmVxdWlyZWQ6IHRydWV9LFxuICAgIG5vdGVzOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfSxcblxuICAgIGVtYWlsSWQ6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiBudWxsIH0sXG4gICAgY3VycmVudE9yZGVyczogeyB0eXBlOiBBcnJheSwgZGVmYXVsdDogbnVsbCB9LFxuICAgIHN0YXR1czogeyB0eXBlOiBTdHJpbmcgLCBkZWZhdWx0OiBcImF2YWlsYWJsZVwiIH0sXG4gICAgb2NjdXBpZWRBdDogeyB0eXBlOiBEYXRlLCBkZWZhdWx0OiBudWxsICB9XG59LCB7IHRpbWVzdGFtcHM6IHsgY3JlYXRlZEF0OiAnY3JlYXRlZF9hdCcsIHVwZGF0ZWRBdDogJ3VwZGF0ZWRfYXQnIH0gfSk7XG5cbm1vZHVsZS5leHBvcnRzID0gbW9uZ29vc2UubW9kZWwoXCJ0YWJsZVwiLCB0YWJsZVNjaGVtYSk7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFFcEMsTUFBTUMsV0FBVyxHQUFHLElBQUlGLFFBQVEsQ0FBQ0csTUFBTSxDQUFDO0VBQ3BDQyxXQUFXLEVBQUU7SUFBRUMsSUFBSSxFQUFFQyxNQUFNO0lBQUVDLFFBQVEsRUFBRSxJQUFJO0lBQUVDLE1BQU0sRUFBRTtFQUFLLENBQUM7RUFDM0RDLFFBQVEsRUFBRTtJQUFFSixJQUFJLEVBQUVLLE1BQU07SUFBRUgsUUFBUSxFQUFFO0VBQUksQ0FBQztFQUN6Q0ksS0FBSyxFQUFFO0lBQUVOLElBQUksRUFBRUMsTUFBTTtJQUFFTSxPQUFPLEVBQUU7RUFBRyxDQUFDO0VBRXBDQyxPQUFPLEVBQUU7SUFBRVIsSUFBSSxFQUFFQyxNQUFNO0lBQUVNLE9BQU8sRUFBRTtFQUFLLENBQUM7RUFDeENFLGFBQWEsRUFBRTtJQUFFVCxJQUFJLEVBQUVVLEtBQUs7SUFBRUgsT0FBTyxFQUFFO0VBQUssQ0FBQztFQUM3Q0ksTUFBTSxFQUFFO0lBQUVYLElBQUksRUFBRUMsTUFBTTtJQUFHTSxPQUFPLEVBQUU7RUFBWSxDQUFDO0VBQy9DSyxVQUFVLEVBQUU7SUFBRVosSUFBSSxFQUFFYSxJQUFJO0lBQUVOLE9BQU8sRUFBRTtFQUFNO0FBQzdDLENBQUMsRUFBRTtFQUFFTyxVQUFVLEVBQUU7SUFBRUMsU0FBUyxFQUFFLFlBQVk7SUFBRUMsU0FBUyxFQUFFO0VBQWE7QUFBRSxDQUFDLENBQUM7QUFFeEVDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHdkIsUUFBUSxDQUFDd0IsS0FBSyxDQUFDLE9BQU8sRUFBRXRCLFdBQVcsQ0FBQyJ9","map":{"version":3,"names":["mongoose","require","tableSchema","Schema","tableNumber","type","String","required","unique","capacity","Number","notes","default","emailId","currentOrders","Array","status","occupiedAt","Date","timestamps","createdAt","updatedAt","module","exports","model"],"sourceRoot":"/Users/prashant/Desktop/social-backend/model/","sources":["table.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\n\nconst tableSchema = new mongoose.Schema({\n    tableNumber: { type: String, required: true, unique: true },\n    capacity: { type: Number, required: true},\n    notes: { type: String, default: '' },\n\n    emailId: { type: String, default: null },\n    currentOrders: { type: Array, default: null },\n    status: { type: String , default: \"available\" },\n    occupiedAt: { type: Date, default: null  }\n}, { timestamps: { createdAt: 'created_at', updatedAt: 'updated_at' } });\n\nmodule.exports = mongoose.model(\"table\", tableSchema);"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,WAAW,GAAG,IAAIF,QAAQ,CAACG,MAAM,CAAC;EACpCC,WAAW,EAAE;IAAEC,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE,IAAI;IAAEC,MAAM,EAAE;EAAK,CAAC;EAC3DC,QAAQ,EAAE;IAAEJ,IAAI,EAAEK,MAAM;IAAEH,QAAQ,EAAE;EAAI,CAAC;EACzCI,KAAK,EAAE;IAAEN,IAAI,EAAEC,MAAM;IAAEM,OAAO,EAAE;EAAG,CAAC;EAEpCC,OAAO,EAAE;IAAER,IAAI,EAAEC,MAAM;IAAEM,OAAO,EAAE;EAAK,CAAC;EACxCE,aAAa,EAAE;IAAET,IAAI,EAAEU,KAAK;IAAEH,OAAO,EAAE;EAAK,CAAC;EAC7CI,MAAM,EAAE;IAAEX,IAAI,EAAEC,MAAM;IAAGM,OAAO,EAAE;EAAY,CAAC;EAC/CK,UAAU,EAAE;IAAEZ,IAAI,EAAEa,IAAI;IAAEN,OAAO,EAAE;EAAM;AAC7C,CAAC,EAAE;EAAEO,UAAU,EAAE;IAAEC,SAAS,EAAE,YAAY;IAAEC,SAAS,EAAE;EAAa;AAAE,CAAC,CAAC;AAExEC,MAAM,CAACC,OAAO,GAAGvB,QAAQ,CAACwB,KAAK,CAAC,OAAO,EAAEtB,WAAW,CAAC"}},"mtime":1671576230259},"{\"assumptions\":{},\"sourceRoot\":\"/Users/prashant/Desktop/social-backend/model/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/prashant/Desktop/social-backend\",\"filename\":\"/Users/prashant/Desktop/social-backend/model/seq.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/prashant/Desktop/social-backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.20.2:development":{"value":{"code":"const mongoose = require(\"mongoose\");\nconst seqSchema = new mongoose.Schema({\n  // seq_name: {type: String, unique: true, default: null },\n  _id: {\n    type: String,\n    required: true\n  },\n  seq_val: {\n    type: Number,\n    required: true,\n    default: 1\n  }\n});\nmodule.exports = mongoose.model(\"seq\", seqSchema);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJzZXFTY2hlbWEiLCJTY2hlbWEiLCJfaWQiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJzZXFfdmFsIiwiTnVtYmVyIiwiZGVmYXVsdCIsIm1vZHVsZSIsImV4cG9ydHMiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3ByYXNoYW50L0Rlc2t0b3Avc29jaWFsLWJhY2tlbmQvbW9kZWwvIiwic291cmNlcyI6WyJzZXEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XG5cbmNvbnN0IHNlcVNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICAgIC8vIHNlcV9uYW1lOiB7dHlwZTogU3RyaW5nLCB1bmlxdWU6IHRydWUsIGRlZmF1bHQ6IG51bGwgfSxcbiAgICBfaWQ6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIHNlcV92YWw6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZSwgZGVmYXVsdDogMSB9XG5cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG1vbmdvb3NlLm1vZGVsKFwic2VxXCIsIHNlcVNjaGVtYSk7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFFcEMsTUFBTUMsU0FBUyxHQUFHLElBQUlGLFFBQVEsQ0FBQ0csTUFBTSxDQUFDO0VBQ2xDO0VBQ0FDLEdBQUcsRUFBRTtJQUFFQyxJQUFJLEVBQUVDLE1BQU07SUFBRUMsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUNyQ0MsT0FBTyxFQUFFO0lBQUVILElBQUksRUFBRUksTUFBTTtJQUFFRixRQUFRLEVBQUUsSUFBSTtJQUFFRyxPQUFPLEVBQUU7RUFBRTtBQUV4RCxDQUFDLENBQUM7QUFFRkMsTUFBTSxDQUFDQyxPQUFPLEdBQUdaLFFBQVEsQ0FBQ2EsS0FBSyxDQUFDLEtBQUssRUFBRVgsU0FBUyxDQUFDIn0=","map":{"version":3,"names":["mongoose","require","seqSchema","Schema","_id","type","String","required","seq_val","Number","default","module","exports","model"],"sourceRoot":"/Users/prashant/Desktop/social-backend/model/","sources":["seq.js"],"sourcesContent":["const mongoose = require(\"mongoose\");\n\nconst seqSchema = new mongoose.Schema({\n    // seq_name: {type: String, unique: true, default: null },\n    _id: { type: String, required: true },\n    seq_val: { type: Number, required: true, default: 1 }\n\n});\n\nmodule.exports = mongoose.model(\"seq\", seqSchema);"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,SAAS,GAAG,IAAIF,QAAQ,CAACG,MAAM,CAAC;EAClC;EACAC,GAAG,EAAE;IAAEC,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EACrCC,OAAO,EAAE;IAAEH,IAAI,EAAEI,MAAM;IAAEF,QAAQ,EAAE,IAAI;IAAEG,OAAO,EAAE;EAAE;AAExD,CAAC,CAAC;AAEFC,MAAM,CAACC,OAAO,GAAGZ,QAAQ,CAACa,KAAK,CAAC,KAAK,EAAEX,SAAS,CAAC"}},"mtime":1668204154246},"{\"assumptions\":{},\"sourceRoot\":\"/Users/prashant/Desktop/social-backend/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/prashant/Desktop/social-backend\",\"filename\":\"/Users/prashant/Desktop/social-backend/routes/table.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/prashant/Desktop/social-backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.20.2:development":{"value":{"code":"// const tableSchema = new mongoose.Schema({\n//     tableNumber: { type: Number, required: true, unique: true },\n//     emailId: { type: String, default: null },\n//     currentOrders: { type: Array, default: null },\n//     status: { type: String , default: null },\n//     occupiedAt: { type: Date, default: null  }\n// }, { timestamps: { createdAt: 'created_at', updatedAt: 'updated_at' } });\n\nconst Table = require(\"../model/table\");\nconst Order = require(\"../model/order\");\nconst Seq = require(\"../model/seq\");\nconst express = require('express');\nconst router = express.Router();\n// const bcrypt = require('bcrypt')\n// const jwt = require(\"jsonwebtoken\");\n\nasync function getValueForNextSequence(sequenceOfName) {\n  console.log('sequenceOfName', sequenceOfName);\n  let filter = {\n    seq_name: sequenceOfName\n  };\n  let updates = {\n    $inc: {\n      seq_val: 1\n    }\n  };\n  var sequenceDoc = await Seq.findOneAndUpdate(filter, updates, {\n    returnOriginal: false\n  });\n  console.log('sequenceDoc', sequenceDoc);\n  return sequenceDoc.seq_val;\n}\nrouter.post(\"/createTable\", async (req, res) => {\n  try {\n    let {\n      tableNumber,\n      capacity,\n      notes\n    } = req.body;\n    let data = await Table.create({\n      tableNumber: tableNumber,\n      capacity: capacity,\n      notes: notes\n    });\n    res.status(200).json({\n      data: data\n    });\n  } catch (err) {\n    res.status(500).json(\"Server Error!\");\n    console.log(err);\n  }\n});\nrouter.get(\"/allTables\", async (req, res) => {\n  try {\n    console.log('here');\n    let data = await Table.find({});\n    //let data=await Order.find()\n    res.status(200).json(data);\n  } catch (err) {\n    res.status(500).json(\"Server Error!\");\n    // console.log(err);\n  }\n});\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJUYWJsZSIsInJlcXVpcmUiLCJPcmRlciIsIlNlcSIsImV4cHJlc3MiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJnZXRWYWx1ZUZvck5leHRTZXF1ZW5jZSIsInNlcXVlbmNlT2ZOYW1lIiwiY29uc29sZSIsImxvZyIsImZpbHRlciIsInNlcV9uYW1lIiwidXBkYXRlcyIsIiRpbmMiLCJzZXFfdmFsIiwic2VxdWVuY2VEb2MiLCJmaW5kT25lQW5kVXBkYXRlIiwicmV0dXJuT3JpZ2luYWwiLCJwb3N0IiwicmVxIiwicmVzIiwidGFibGVOdW1iZXIiLCJjYXBhY2l0eSIsIm5vdGVzIiwiYm9keSIsImRhdGEiLCJjcmVhdGUiLCJzdGF0dXMiLCJqc29uIiwiZXJyIiwiZ2V0IiwiZmluZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9wcmFzaGFudC9EZXNrdG9wL3NvY2lhbC1iYWNrZW5kL3JvdXRlcy8iLCJzb3VyY2VzIjpbInRhYmxlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbnN0IHRhYmxlU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4vLyAgICAgdGFibGVOdW1iZXI6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZSwgdW5pcXVlOiB0cnVlIH0sXG4vLyAgICAgZW1haWxJZDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IG51bGwgfSxcbi8vICAgICBjdXJyZW50T3JkZXJzOiB7IHR5cGU6IEFycmF5LCBkZWZhdWx0OiBudWxsIH0sXG4vLyAgICAgc3RhdHVzOiB7IHR5cGU6IFN0cmluZyAsIGRlZmF1bHQ6IG51bGwgfSxcbi8vICAgICBvY2N1cGllZEF0OiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IG51bGwgIH1cbi8vIH0sIHsgdGltZXN0YW1wczogeyBjcmVhdGVkQXQ6ICdjcmVhdGVkX2F0JywgdXBkYXRlZEF0OiAndXBkYXRlZF9hdCcgfSB9KTtcblxuXG5jb25zdCBUYWJsZSA9IHJlcXVpcmUoXCIuLi9tb2RlbC90YWJsZVwiKTtcbmNvbnN0IE9yZGVyID0gcmVxdWlyZShcIi4uL21vZGVsL29yZGVyXCIpO1xuY29uc3QgU2VxID0gcmVxdWlyZShcIi4uL21vZGVsL3NlcVwiKTtcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJylcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG4vLyBjb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHQnKVxuLy8gY29uc3Qgand0ID0gcmVxdWlyZShcImpzb253ZWJ0b2tlblwiKTtcblxuYXN5bmMgZnVuY3Rpb24gZ2V0VmFsdWVGb3JOZXh0U2VxdWVuY2Uoc2VxdWVuY2VPZk5hbWUpIHtcblxuICAgIGNvbnNvbGUubG9nKCdzZXF1ZW5jZU9mTmFtZScsIHNlcXVlbmNlT2ZOYW1lKVxuICAgIGxldCBmaWx0ZXIgPSB7IHNlcV9uYW1lOiBzZXF1ZW5jZU9mTmFtZSB9XG4gICAgbGV0IHVwZGF0ZXMgPSB7ICRpbmM6IHsgc2VxX3ZhbDogMSB9IH1cbiAgICB2YXIgc2VxdWVuY2VEb2MgPSBhd2FpdCBTZXEuZmluZE9uZUFuZFVwZGF0ZShcbiAgICAgICAgZmlsdGVyLFxuICAgICAgICB1cGRhdGVzLFxuICAgICAgICB7IHJldHVybk9yaWdpbmFsOiBmYWxzZSB9XG4gICAgKTtcbiAgICBjb25zb2xlLmxvZygnc2VxdWVuY2VEb2MnLCBzZXF1ZW5jZURvYylcbiAgICByZXR1cm4gc2VxdWVuY2VEb2Muc2VxX3ZhbDtcbn1cblxuXG5yb3V0ZXIucG9zdChcIi9jcmVhdGVUYWJsZVwiLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBsZXQgeyB0YWJsZU51bWJlciwgY2FwYWNpdHksIG5vdGVzIH0gPSByZXEuYm9keVxuICAgICAgICBsZXQgZGF0YSA9IGF3YWl0IFRhYmxlLmNyZWF0ZSh7IHRhYmxlTnVtYmVyOiB0YWJsZU51bWJlciwgY2FwYWNpdHk6Y2FwYWNpdHksIG5vdGVzOm5vdGVzIH0pXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgZGF0YTogZGF0YSB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oXCJTZXJ2ZXIgRXJyb3IhXCIpXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfVxufSk7XG5cbnJvdXRlci5nZXQoXCIvYWxsVGFibGVzXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdoZXJlJylcbiAgICAgICAgbGV0IGRhdGEgPSBhd2FpdCBUYWJsZS5maW5kKHt9KVxuICAgICAgICAvL2xldCBkYXRhPWF3YWl0IE9yZGVyLmZpbmQoKVxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihkYXRhKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oXCJTZXJ2ZXIgRXJyb3IhXCIpXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGVycik7XG4gICAgfVxufSk7XG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBLE1BQU1BLEtBQUssR0FBR0MsT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBQ3ZDLE1BQU1DLEtBQUssR0FBR0QsT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBQ3ZDLE1BQU1FLEdBQUcsR0FBR0YsT0FBTyxDQUFDLGNBQWMsQ0FBQztBQUNuQyxNQUFNRyxPQUFPLEdBQUdILE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUksTUFBTSxHQUFHRCxPQUFPLENBQUNFLE1BQU0sRUFBRTtBQUMvQjtBQUNBOztBQUVBLGVBQWVDLHVCQUF1QixDQUFDQyxjQUFjLEVBQUU7RUFFbkRDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGdCQUFnQixFQUFFRixjQUFjLENBQUM7RUFDN0MsSUFBSUcsTUFBTSxHQUFHO0lBQUVDLFFBQVEsRUFBRUo7RUFBZSxDQUFDO0VBQ3pDLElBQUlLLE9BQU8sR0FBRztJQUFFQyxJQUFJLEVBQUU7TUFBRUMsT0FBTyxFQUFFO0lBQUU7RUFBRSxDQUFDO0VBQ3RDLElBQUlDLFdBQVcsR0FBRyxNQUFNYixHQUFHLENBQUNjLGdCQUFnQixDQUN4Q04sTUFBTSxFQUNORSxPQUFPLEVBQ1A7SUFBRUssY0FBYyxFQUFFO0VBQU0sQ0FBQyxDQUM1QjtFQUNEVCxPQUFPLENBQUNDLEdBQUcsQ0FBQyxhQUFhLEVBQUVNLFdBQVcsQ0FBQztFQUN2QyxPQUFPQSxXQUFXLENBQUNELE9BQU87QUFDOUI7QUFHQVYsTUFBTSxDQUFDYyxJQUFJLENBQUMsY0FBYyxFQUFFLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQzVDLElBQUk7SUFDQSxJQUFJO01BQUVDLFdBQVc7TUFBRUMsUUFBUTtNQUFFQztJQUFNLENBQUMsR0FBR0osR0FBRyxDQUFDSyxJQUFJO0lBQy9DLElBQUlDLElBQUksR0FBRyxNQUFNMUIsS0FBSyxDQUFDMkIsTUFBTSxDQUFDO01BQUVMLFdBQVcsRUFBRUEsV0FBVztNQUFFQyxRQUFRLEVBQUNBLFFBQVE7TUFBRUMsS0FBSyxFQUFDQTtJQUFNLENBQUMsQ0FBQztJQUMzRkgsR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFSCxJQUFJLEVBQUVBO0lBQUssQ0FBQyxDQUFDO0VBQ3hDLENBQUMsQ0FBQyxPQUFPSSxHQUFHLEVBQUU7SUFDVlQsR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxlQUFlLENBQUM7SUFDckNwQixPQUFPLENBQUNDLEdBQUcsQ0FBQ29CLEdBQUcsQ0FBQztFQUNwQjtBQUNKLENBQUMsQ0FBQztBQUVGekIsTUFBTSxDQUFDMEIsR0FBRyxDQUFDLFlBQVksRUFBRSxPQUFPWCxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN6QyxJQUFJO0lBQ0FaLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLE1BQU0sQ0FBQztJQUNuQixJQUFJZ0IsSUFBSSxHQUFHLE1BQU0xQixLQUFLLENBQUNnQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDL0I7SUFDQVgsR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ0gsSUFBSSxDQUFDO0VBQzlCLENBQUMsQ0FBQyxPQUFPSSxHQUFHLEVBQUU7SUFDVlQsR0FBRyxDQUFDTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxlQUFlLENBQUM7SUFDckM7RUFDSjtBQUNKLENBQUMsQ0FBQzs7QUFDRkksTUFBTSxDQUFDQyxPQUFPLEdBQUc3QixNQUFNIn0=","map":{"version":3,"names":["Table","require","Order","Seq","express","router","Router","getValueForNextSequence","sequenceOfName","console","log","filter","seq_name","updates","$inc","seq_val","sequenceDoc","findOneAndUpdate","returnOriginal","post","req","res","tableNumber","capacity","notes","body","data","create","status","json","err","get","find","module","exports"],"sourceRoot":"/Users/prashant/Desktop/social-backend/routes/","sources":["table.js"],"sourcesContent":["// const tableSchema = new mongoose.Schema({\n//     tableNumber: { type: Number, required: true, unique: true },\n//     emailId: { type: String, default: null },\n//     currentOrders: { type: Array, default: null },\n//     status: { type: String , default: null },\n//     occupiedAt: { type: Date, default: null  }\n// }, { timestamps: { createdAt: 'created_at', updatedAt: 'updated_at' } });\n\n\nconst Table = require(\"../model/table\");\nconst Order = require(\"../model/order\");\nconst Seq = require(\"../model/seq\");\nconst express = require('express')\nconst router = express.Router();\n// const bcrypt = require('bcrypt')\n// const jwt = require(\"jsonwebtoken\");\n\nasync function getValueForNextSequence(sequenceOfName) {\n\n    console.log('sequenceOfName', sequenceOfName)\n    let filter = { seq_name: sequenceOfName }\n    let updates = { $inc: { seq_val: 1 } }\n    var sequenceDoc = await Seq.findOneAndUpdate(\n        filter,\n        updates,\n        { returnOriginal: false }\n    );\n    console.log('sequenceDoc', sequenceDoc)\n    return sequenceDoc.seq_val;\n}\n\n\nrouter.post(\"/createTable\", async (req, res) => {\n    try {\n        let { tableNumber, capacity, notes } = req.body\n        let data = await Table.create({ tableNumber: tableNumber, capacity:capacity, notes:notes })\n        res.status(200).json({ data: data });\n    } catch (err) {\n        res.status(500).json(\"Server Error!\")\n        console.log(err);\n    }\n});\n\nrouter.get(\"/allTables\", async (req, res) => {\n    try {\n        console.log('here')\n        let data = await Table.find({})\n        //let data=await Order.find()\n        res.status(200).json(data);\n    } catch (err) {\n        res.status(500).json(\"Server Error!\")\n        // console.log(err);\n    }\n});\nmodule.exports = router;"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,MAAMA,KAAK,GAAGC,OAAO,CAAC,gBAAgB,CAAC;AACvC,MAAMC,KAAK,GAAGD,OAAO,CAAC,gBAAgB,CAAC;AACvC,MAAME,GAAG,GAAGF,OAAO,CAAC,cAAc,CAAC;AACnC,MAAMG,OAAO,GAAGH,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMI,MAAM,GAAGD,OAAO,CAACE,MAAM,EAAE;AAC/B;AACA;;AAEA,eAAeC,uBAAuB,CAACC,cAAc,EAAE;EAEnDC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEF,cAAc,CAAC;EAC7C,IAAIG,MAAM,GAAG;IAAEC,QAAQ,EAAEJ;EAAe,CAAC;EACzC,IAAIK,OAAO,GAAG;IAAEC,IAAI,EAAE;MAAEC,OAAO,EAAE;IAAE;EAAE,CAAC;EACtC,IAAIC,WAAW,GAAG,MAAMb,GAAG,CAACc,gBAAgB,CACxCN,MAAM,EACNE,OAAO,EACP;IAAEK,cAAc,EAAE;EAAM,CAAC,CAC5B;EACDT,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEM,WAAW,CAAC;EACvC,OAAOA,WAAW,CAACD,OAAO;AAC9B;AAGAV,MAAM,CAACc,IAAI,CAAC,cAAc,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EAC5C,IAAI;IACA,IAAI;MAAEC,WAAW;MAAEC,QAAQ;MAAEC;IAAM,CAAC,GAAGJ,GAAG,CAACK,IAAI;IAC/C,IAAIC,IAAI,GAAG,MAAM1B,KAAK,CAAC2B,MAAM,CAAC;MAAEL,WAAW,EAAEA,WAAW;MAAEC,QAAQ,EAACA,QAAQ;MAAEC,KAAK,EAACA;IAAM,CAAC,CAAC;IAC3FH,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEH,IAAI,EAAEA;IAAK,CAAC,CAAC;EACxC,CAAC,CAAC,OAAOI,GAAG,EAAE;IACVT,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,eAAe,CAAC;IACrCpB,OAAO,CAACC,GAAG,CAACoB,GAAG,CAAC;EACpB;AACJ,CAAC,CAAC;AAEFzB,MAAM,CAAC0B,GAAG,CAAC,YAAY,EAAE,OAAOX,GAAG,EAAEC,GAAG,KAAK;EACzC,IAAI;IACAZ,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;IACnB,IAAIgB,IAAI,GAAG,MAAM1B,KAAK,CAACgC,IAAI,CAAC,CAAC,CAAC,CAAC;IAC/B;IACAX,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,IAAI,CAAC;EAC9B,CAAC,CAAC,OAAOI,GAAG,EAAE;IACVT,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,eAAe,CAAC;IACrC;EACJ;AACJ,CAAC,CAAC;;AACFI,MAAM,CAACC,OAAO,GAAG7B,MAAM"}},"mtime":1671576359359},"{\"assumptions\":{},\"sourceRoot\":\"/Users/prashant/Desktop/social-backend/sse/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/prashant/Desktop/social-backend\",\"filename\":\"/Users/prashant/Desktop/social-backend/sse/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/prashant/Desktop/social-backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.20.2:development":{"value":{"code":"const SSE = require(\"express-sse\");\nconst sse = new SSE();\nmodule.exports = sse;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTU0UiLCJyZXF1aXJlIiwic3NlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3ByYXNoYW50L0Rlc2t0b3Avc29jaWFsLWJhY2tlbmQvc3NlLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgU1NFID0gcmVxdWlyZShcImV4cHJlc3Mtc3NlXCIpO1xuXG5jb25zdCBzc2UgPSBuZXcgU1NFKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gc3NlOyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsR0FBRyxHQUFHQyxPQUFPLENBQUMsYUFBYSxDQUFDO0FBRWxDLE1BQU1DLEdBQUcsR0FBRyxJQUFJRixHQUFHLEVBQUU7QUFFckJHLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHRixHQUFHIn0=","map":{"version":3,"names":["SSE","require","sse","module","exports"],"sourceRoot":"/Users/prashant/Desktop/social-backend/sse/","sources":["index.js"],"sourcesContent":["const SSE = require(\"express-sse\");\n\nconst sse = new SSE();\n\nmodule.exports = sse;"],"mappings":"AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,aAAa,CAAC;AAElC,MAAMC,GAAG,GAAG,IAAIF,GAAG,EAAE;AAErBG,MAAM,CAACC,OAAO,GAAGF,GAAG"}},"mtime":1671425302768},"{\"assumptions\":{},\"sourceRoot\":\"/Users/prashant/Desktop/social-backend/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/prashant/Desktop/social-backend\",\"filename\":\"/Users/prashant/Desktop/social-backend/routes/sse.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/prashant/Desktop/social-backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.20.2:development":{"value":{"code":"const express = require(\"express\");\nconst sse = require(\"../sse\");\nconst router = express.Router();\nrouter.get(\"/stream\", sse.init);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInNzZSIsInJvdXRlciIsIlJvdXRlciIsImdldCIsImluaXQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcHJhc2hhbnQvRGVza3RvcC9zb2NpYWwtYmFja2VuZC9yb3V0ZXMvIiwic291cmNlcyI6WyJzc2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoXCJleHByZXNzXCIpO1xuY29uc3Qgc3NlID0gcmVxdWlyZShcIi4uL3NzZVwiKTtcblxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxucm91dGVyLmdldChcIi9zdHJlYW1cIiwgc3NlLmluaXQpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNQyxHQUFHLEdBQUdELE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFFN0IsTUFBTUUsTUFBTSxHQUFHSCxPQUFPLENBQUNJLE1BQU0sRUFBRTtBQUUvQkQsTUFBTSxDQUFDRSxHQUFHLENBQUMsU0FBUyxFQUFFSCxHQUFHLENBQUNJLElBQUksQ0FBQztBQUUvQkMsTUFBTSxDQUFDQyxPQUFPLEdBQUdMLE1BQU0ifQ==","map":{"version":3,"names":["express","require","sse","router","Router","get","init","module","exports"],"sourceRoot":"/Users/prashant/Desktop/social-backend/routes/","sources":["sse.js"],"sourcesContent":["const express = require(\"express\");\nconst sse = require(\"../sse\");\n\nconst router = express.Router();\n\nrouter.get(\"/stream\", sse.init);\n\nmodule.exports = router;"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,GAAG,GAAGD,OAAO,CAAC,QAAQ,CAAC;AAE7B,MAAME,MAAM,GAAGH,OAAO,CAACI,MAAM,EAAE;AAE/BD,MAAM,CAACE,GAAG,CAAC,SAAS,EAAEH,GAAG,CAACI,IAAI,CAAC;AAE/BC,MAAM,CAACC,OAAO,GAAGL,MAAM"}},"mtime":1671425814321},"{\"assumptions\":{},\"sourceRoot\":\"/Users/prashant/Desktop/social-backend/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/prashant/Desktop/social-backend\",\"filename\":\"/Users/prashant/Desktop/social-backend/controllers/orders.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/prashant/Desktop/social-backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.20.2:development":{"value":{"code":"const {\n  getOrdersService,\n  createOrderService\n} = require(\"../services/order\");\nconst sse = require(\"../sse\");\nconst getOrdersController = async (req, res) => {\n  const result = await getOrdersService();\n  res.status(result.statusCode).json(result);\n};\nconst createOrderController = async (req, res) => {\n  const body = req.body;\n  const result = await createOrderService(body);\n  res.status(result.statusCode).json(result);\n  if (!result.error) {\n    //   emit post event\n    sse.send(result, \"order_created\");\n  }\n};\nmodule.exports = {\n  getOrdersController,\n  createOrderController\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRPcmRlcnNTZXJ2aWNlIiwiY3JlYXRlT3JkZXJTZXJ2aWNlIiwicmVxdWlyZSIsInNzZSIsImdldE9yZGVyc0NvbnRyb2xsZXIiLCJyZXEiLCJyZXMiLCJyZXN1bHQiLCJzdGF0dXMiLCJzdGF0dXNDb2RlIiwianNvbiIsImNyZWF0ZU9yZGVyQ29udHJvbGxlciIsImJvZHkiLCJlcnJvciIsInNlbmQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcHJhc2hhbnQvRGVza3RvcC9zb2NpYWwtYmFja2VuZC9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbIm9yZGVycy5jb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHtcbiAgICBnZXRPcmRlcnNTZXJ2aWNlLFxuICAgIGNyZWF0ZU9yZGVyU2VydmljZSxcbiAgXG4gIH0gPSByZXF1aXJlKFwiLi4vc2VydmljZXMvb3JkZXJcIik7XG4gIGNvbnN0IHNzZSA9IHJlcXVpcmUoXCIuLi9zc2VcIik7XG4gIFxuICBjb25zdCBnZXRPcmRlcnNDb250cm9sbGVyID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0T3JkZXJzU2VydmljZSgpO1xuICAgIHJlcy5zdGF0dXMocmVzdWx0LnN0YXR1c0NvZGUpLmpzb24ocmVzdWx0KTtcbiAgfTtcbiAgXG4gIGNvbnN0IGNyZWF0ZU9yZGVyQ29udHJvbGxlciA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IGJvZHkgPSByZXEuYm9keTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVPcmRlclNlcnZpY2UoYm9keSk7XG4gICAgcmVzLnN0YXR1cyhyZXN1bHQuc3RhdHVzQ29kZSkuanNvbihyZXN1bHQpO1xuICAgIGlmICghcmVzdWx0LmVycm9yKSB7XG4gICAgICAvLyAgIGVtaXQgcG9zdCBldmVudFxuICAgICAgc3NlLnNlbmQocmVzdWx0LCBcIm9yZGVyX2NyZWF0ZWRcIilcbiAgICB9XG4gIH07XG4gIFxuICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBnZXRPcmRlcnNDb250cm9sbGVyLFxuICAgIGNyZWF0ZU9yZGVyQ29udHJvbGxlclxuICB9OyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtFQUNGQSxnQkFBZ0I7RUFDaEJDO0FBRUYsQ0FBQyxHQUFHQyxPQUFPLENBQUMsbUJBQW1CLENBQUM7QUFDaEMsTUFBTUMsR0FBRyxHQUFHRCxPQUFPLENBQUMsUUFBUSxDQUFDO0FBRTdCLE1BQU1FLG1CQUFtQixHQUFHLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQzlDLE1BQU1DLE1BQU0sR0FBRyxNQUFNUCxnQkFBZ0IsRUFBRTtFQUN2Q00sR0FBRyxDQUFDRSxNQUFNLENBQUNELE1BQU0sQ0FBQ0UsVUFBVSxDQUFDLENBQUNDLElBQUksQ0FBQ0gsTUFBTSxDQUFDO0FBQzVDLENBQUM7QUFFRCxNQUFNSSxxQkFBcUIsR0FBRyxPQUFPTixHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUNoRCxNQUFNTSxJQUFJLEdBQUdQLEdBQUcsQ0FBQ08sSUFBSTtFQUNyQixNQUFNTCxNQUFNLEdBQUcsTUFBTU4sa0JBQWtCLENBQUNXLElBQUksQ0FBQztFQUM3Q04sR0FBRyxDQUFDRSxNQUFNLENBQUNELE1BQU0sQ0FBQ0UsVUFBVSxDQUFDLENBQUNDLElBQUksQ0FBQ0gsTUFBTSxDQUFDO0VBQzFDLElBQUksQ0FBQ0EsTUFBTSxDQUFDTSxLQUFLLEVBQUU7SUFDakI7SUFDQVYsR0FBRyxDQUFDVyxJQUFJLENBQUNQLE1BQU0sRUFBRSxlQUFlLENBQUM7RUFDbkM7QUFDRixDQUFDO0FBRURRLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHO0VBQ2ZaLG1CQUFtQjtFQUNuQk87QUFDRixDQUFDIn0=","map":{"version":3,"names":["getOrdersService","createOrderService","require","sse","getOrdersController","req","res","result","status","statusCode","json","createOrderController","body","error","send","module","exports"],"sourceRoot":"/Users/prashant/Desktop/social-backend/controllers/","sources":["orders.controller.js"],"sourcesContent":["const {\n    getOrdersService,\n    createOrderService,\n  \n  } = require(\"../services/order\");\n  const sse = require(\"../sse\");\n  \n  const getOrdersController = async (req, res) => {\n    const result = await getOrdersService();\n    res.status(result.statusCode).json(result);\n  };\n  \n  const createOrderController = async (req, res) => {\n    const body = req.body;\n    const result = await createOrderService(body);\n    res.status(result.statusCode).json(result);\n    if (!result.error) {\n      //   emit post event\n      sse.send(result, \"order_created\")\n    }\n  };\n  \n  module.exports = {\n    getOrdersController,\n    createOrderController\n  };"],"mappings":"AAAA,MAAM;EACFA,gBAAgB;EAChBC;AAEF,CAAC,GAAGC,OAAO,CAAC,mBAAmB,CAAC;AAChC,MAAMC,GAAG,GAAGD,OAAO,CAAC,QAAQ,CAAC;AAE7B,MAAME,mBAAmB,GAAG,OAAOC,GAAG,EAAEC,GAAG,KAAK;EAC9C,MAAMC,MAAM,GAAG,MAAMP,gBAAgB,EAAE;EACvCM,GAAG,CAACE,MAAM,CAACD,MAAM,CAACE,UAAU,CAAC,CAACC,IAAI,CAACH,MAAM,CAAC;AAC5C,CAAC;AAED,MAAMI,qBAAqB,GAAG,OAAON,GAAG,EAAEC,GAAG,KAAK;EAChD,MAAMM,IAAI,GAAGP,GAAG,CAACO,IAAI;EACrB,MAAML,MAAM,GAAG,MAAMN,kBAAkB,CAACW,IAAI,CAAC;EAC7CN,GAAG,CAACE,MAAM,CAACD,MAAM,CAACE,UAAU,CAAC,CAACC,IAAI,CAACH,MAAM,CAAC;EAC1C,IAAI,CAACA,MAAM,CAACM,KAAK,EAAE;IACjB;IACAV,GAAG,CAACW,IAAI,CAACP,MAAM,EAAE,eAAe,CAAC;EACnC;AACF,CAAC;AAEDQ,MAAM,CAACC,OAAO,GAAG;EACfZ,mBAAmB;EACnBO;AACF,CAAC"}},"mtime":1671425125383},"{\"assumptions\":{},\"sourceRoot\":\"/Users/prashant/Desktop/social-backend/services/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/prashant/Desktop/social-backend\",\"filename\":\"/Users/prashant/Desktop/social-backend/services/order.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/prashant/Desktop/social-backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.20.2:development":{"value":{"code":"const Order = require(\"../model/order\");\nconst Table = require(\"../model/table\");\nconst sse = require(\"../sse\");\nconst getOrdersService = async () => {\n  //   try {\n  //     const posts = await PostModel.find();\n  //     const _length = posts.length;\n  //     const message = _length === 0 ? \"Not found\" : \"success\";\n  //     const error = _length === 0 ? true : false;\n  //     const statusCode = _length === 0 ? 404 : 200;\n  //     return { data: posts, error, message, statusCode };\n  //   } catch (error) {\n  //     return {\n  //       data: [],\n  //       error: true,\n  //       message: \"Sorry an error occurred\",\n  //       statusCode: 500,\n  //     };\n  //   }\n  try {\n    const orders = await Order.find();\n    const _length = orders.length;\n    const message = _length === 0 ? \"Not found\" : \"success\";\n    const error = _length === 0 ? true : false;\n    const statusCode = _length === 0 ? 404 : 200;\n    return {\n      data: orders,\n      error,\n      message,\n      statusCode\n    };\n  } catch (err) {\n    return {\n      data: [],\n      error: true,\n      message: \"Sorry an error occurred\",\n      statusCode: 500\n    };\n  }\n};\nconst createOrderService = async body => {\n  try {\n    let {\n      orderItems,\n      email,\n      orderStatus,\n      paymentStatus,\n      orderType,\n      orderAmount,\n      tableId\n    } = body;\n    const order = await Order.create({\n      orderItems,\n      email,\n      orderStatus,\n      paymentStatus,\n      orderType,\n      orderAmount\n    });\n    await Table.updateOne({\n      tableId: tableId\n    }, {\n      $set: {\n        currentOrders: {\n          $push: {\n            orderItems,\n            email,\n            orderStatus,\n            paymentStatus,\n            orderType,\n            orderAmount\n          }\n        },\n        status: 'occupied'\n      }\n    });\n    console.log(\"here\");\n    const _length = order.length;\n    const message = _length === 0 ? \"Not found\" : \"success\";\n    const error = _length === 0 ? true : false;\n    const statusCode = _length === 0 ? 404 : 200;\n    return {\n      data: order,\n      error,\n      message,\n      statusCode\n    };\n  } catch (err) {\n    return {\n      data: [],\n      error: true,\n      message: \"Sorry an error occurred\",\n      statusCode: 500\n    };\n  }\n};\nmodule.exports = {\n  getOrdersService,\n  createOrderService\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPcmRlciIsInJlcXVpcmUiLCJUYWJsZSIsInNzZSIsImdldE9yZGVyc1NlcnZpY2UiLCJvcmRlcnMiLCJmaW5kIiwiX2xlbmd0aCIsImxlbmd0aCIsIm1lc3NhZ2UiLCJlcnJvciIsInN0YXR1c0NvZGUiLCJkYXRhIiwiZXJyIiwiY3JlYXRlT3JkZXJTZXJ2aWNlIiwiYm9keSIsIm9yZGVySXRlbXMiLCJlbWFpbCIsIm9yZGVyU3RhdHVzIiwicGF5bWVudFN0YXR1cyIsIm9yZGVyVHlwZSIsIm9yZGVyQW1vdW50IiwidGFibGVJZCIsIm9yZGVyIiwiY3JlYXRlIiwidXBkYXRlT25lIiwiJHNldCIsImN1cnJlbnRPcmRlcnMiLCIkcHVzaCIsInN0YXR1cyIsImNvbnNvbGUiLCJsb2ciLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcHJhc2hhbnQvRGVza3RvcC9zb2NpYWwtYmFja2VuZC9zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbIm9yZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IE9yZGVyID0gcmVxdWlyZShcIi4uL21vZGVsL29yZGVyXCIpO1xuY29uc3QgVGFibGUgPSByZXF1aXJlKFwiLi4vbW9kZWwvdGFibGVcIik7XG4gIGNvbnN0IHNzZSA9IHJlcXVpcmUoXCIuLi9zc2VcIik7XG5cbmNvbnN0IGdldE9yZGVyc1NlcnZpY2UgPSBhc3luYyAoKSA9PiB7XG4gICAgLy8gICB0cnkge1xuICAgIC8vICAgICBjb25zdCBwb3N0cyA9IGF3YWl0IFBvc3RNb2RlbC5maW5kKCk7XG4gICAgLy8gICAgIGNvbnN0IF9sZW5ndGggPSBwb3N0cy5sZW5ndGg7XG4gICAgLy8gICAgIGNvbnN0IG1lc3NhZ2UgPSBfbGVuZ3RoID09PSAwID8gXCJOb3QgZm91bmRcIiA6IFwic3VjY2Vzc1wiO1xuICAgIC8vICAgICBjb25zdCBlcnJvciA9IF9sZW5ndGggPT09IDAgPyB0cnVlIDogZmFsc2U7XG4gICAgLy8gICAgIGNvbnN0IHN0YXR1c0NvZGUgPSBfbGVuZ3RoID09PSAwID8gNDA0IDogMjAwO1xuICAgIC8vICAgICByZXR1cm4geyBkYXRhOiBwb3N0cywgZXJyb3IsIG1lc3NhZ2UsIHN0YXR1c0NvZGUgfTtcbiAgICAvLyAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gICAgIHJldHVybiB7XG4gICAgLy8gICAgICAgZGF0YTogW10sXG4gICAgLy8gICAgICAgZXJyb3I6IHRydWUsXG4gICAgLy8gICAgICAgbWVzc2FnZTogXCJTb3JyeSBhbiBlcnJvciBvY2N1cnJlZFwiLFxuICAgIC8vICAgICAgIHN0YXR1c0NvZGU6IDUwMCxcbiAgICAvLyAgICAgfTtcbiAgICAvLyAgIH1cbiAgICB0cnkge1xuXG4gICAgICAgIGNvbnN0IG9yZGVycyA9IGF3YWl0IE9yZGVyLmZpbmQoKTtcbiAgICAgICAgY29uc3QgX2xlbmd0aCA9IG9yZGVycy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBfbGVuZ3RoID09PSAwID8gXCJOb3QgZm91bmRcIiA6IFwic3VjY2Vzc1wiO1xuICAgICAgICBjb25zdCBlcnJvciA9IF9sZW5ndGggPT09IDAgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgIGNvbnN0IHN0YXR1c0NvZGUgPSBfbGVuZ3RoID09PSAwID8gNDA0IDogMjAwO1xuICAgICAgICByZXR1cm4geyBkYXRhOiBvcmRlcnMsIGVycm9yLCBtZXNzYWdlLCBzdGF0dXNDb2RlIH07XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgICAgIGVycm9yOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogXCJTb3JyeSBhbiBlcnJvciBvY2N1cnJlZFwiLFxuICAgICAgICAgICAgc3RhdHVzQ29kZTogNTAwLFxuICAgICAgICB9O1xuICAgIH1cbn07XG5jb25zdCBjcmVhdGVPcmRlclNlcnZpY2UgPSBhc3luYyAoYm9keSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGxldCB7IG9yZGVySXRlbXMsIGVtYWlsLCBvcmRlclN0YXR1cywgcGF5bWVudFN0YXR1cywgb3JkZXJUeXBlLCBvcmRlckFtb3VudCwgdGFibGVJZCB9ID0gYm9keVxuICAgICAgICBjb25zdCBvcmRlciA9IGF3YWl0IE9yZGVyLmNyZWF0ZSh7XG4gICAgICAgICAgICBvcmRlckl0ZW1zLCBlbWFpbCwgb3JkZXJTdGF0dXMsIHBheW1lbnRTdGF0dXMsIG9yZGVyVHlwZSwgb3JkZXJBbW91bnRcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IFRhYmxlLnVwZGF0ZU9uZSh7IHRhYmxlSWQ6IHRhYmxlSWQgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkc2V0OiB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRPcmRlcnM6IHsgJHB1c2g6IHsgb3JkZXJJdGVtcywgZW1haWwsIG9yZGVyU3RhdHVzLCBwYXltZW50U3RhdHVzLCBvcmRlclR5cGUsIG9yZGVyQW1vdW50IH0gfSxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnb2NjdXBpZWQnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaGVyZVwiKVxuXG4gICAgICAgIGNvbnN0IF9sZW5ndGggPSBvcmRlci5sZW5ndGg7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBfbGVuZ3RoID09PSAwID8gXCJOb3QgZm91bmRcIiA6IFwic3VjY2Vzc1wiO1xuICAgICAgICBjb25zdCBlcnJvciA9IF9sZW5ndGggPT09IDAgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgIGNvbnN0IHN0YXR1c0NvZGUgPSBfbGVuZ3RoID09PSAwID8gNDA0IDogMjAwO1xuXG4gICAgICAgIHJldHVybiB7IGRhdGE6IG9yZGVyLCBlcnJvciwgbWVzc2FnZSwgc3RhdHVzQ29kZSB9O1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YTogW10sXG4gICAgICAgICAgICBlcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiU29ycnkgYW4gZXJyb3Igb2NjdXJyZWRcIixcbiAgICAgICAgICAgIHN0YXR1c0NvZGU6IDUwMCxcbiAgICAgICAgfTtcbiAgICB9XG59O1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgZ2V0T3JkZXJzU2VydmljZSxcbiAgICBjcmVhdGVPcmRlclNlcnZpY2Vcbn07Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztBQUN2QyxNQUFNQyxLQUFLLEdBQUdELE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztBQUNyQyxNQUFNRSxHQUFHLEdBQUdGLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFFL0IsTUFBTUcsZ0JBQWdCLEdBQUcsWUFBWTtFQUNqQztFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQSxJQUFJO0lBRUEsTUFBTUMsTUFBTSxHQUFHLE1BQU1MLEtBQUssQ0FBQ00sSUFBSSxFQUFFO0lBQ2pDLE1BQU1DLE9BQU8sR0FBR0YsTUFBTSxDQUFDRyxNQUFNO0lBQzdCLE1BQU1DLE9BQU8sR0FBR0YsT0FBTyxLQUFLLENBQUMsR0FBRyxXQUFXLEdBQUcsU0FBUztJQUN2RCxNQUFNRyxLQUFLLEdBQUdILE9BQU8sS0FBSyxDQUFDLEdBQUcsSUFBSSxHQUFHLEtBQUs7SUFDMUMsTUFBTUksVUFBVSxHQUFHSixPQUFPLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHO0lBQzVDLE9BQU87TUFBRUssSUFBSSxFQUFFUCxNQUFNO01BQUVLLEtBQUs7TUFBRUQsT0FBTztNQUFFRTtJQUFXLENBQUM7RUFDdkQsQ0FBQyxDQUFDLE9BQU9FLEdBQUcsRUFBRTtJQUNWLE9BQU87TUFDSEQsSUFBSSxFQUFFLEVBQUU7TUFDUkYsS0FBSyxFQUFFLElBQUk7TUFDWEQsT0FBTyxFQUFFLHlCQUF5QjtNQUNsQ0UsVUFBVSxFQUFFO0lBQ2hCLENBQUM7RUFDTDtBQUNKLENBQUM7QUFDRCxNQUFNRyxrQkFBa0IsR0FBRyxNQUFPQyxJQUFJLElBQUs7RUFDdkMsSUFBSTtJQUNBLElBQUk7TUFBRUMsVUFBVTtNQUFFQyxLQUFLO01BQUVDLFdBQVc7TUFBRUMsYUFBYTtNQUFFQyxTQUFTO01BQUVDLFdBQVc7TUFBRUM7SUFBUSxDQUFDLEdBQUdQLElBQUk7SUFDN0YsTUFBTVEsS0FBSyxHQUFHLE1BQU12QixLQUFLLENBQUN3QixNQUFNLENBQUM7TUFDN0JSLFVBQVU7TUFBRUMsS0FBSztNQUFFQyxXQUFXO01BQUVDLGFBQWE7TUFBRUMsU0FBUztNQUFFQztJQUM5RCxDQUFDLENBQUM7SUFDRixNQUFNbkIsS0FBSyxDQUFDdUIsU0FBUyxDQUFDO01BQUVILE9BQU8sRUFBRUE7SUFBUSxDQUFDLEVBQ3RDO01BQ0lJLElBQUksRUFBRTtRQUNGQyxhQUFhLEVBQUU7VUFBRUMsS0FBSyxFQUFFO1lBQUVaLFVBQVU7WUFBRUMsS0FBSztZQUFFQyxXQUFXO1lBQUVDLGFBQWE7WUFBRUMsU0FBUztZQUFFQztVQUFZO1FBQUUsQ0FBQztRQUNuR1EsTUFBTSxFQUFFO01BQ1o7SUFDSixDQUFDLENBQUM7SUFDRkMsT0FBTyxDQUFDQyxHQUFHLENBQUMsTUFBTSxDQUFDO0lBRXZCLE1BQU14QixPQUFPLEdBQUdnQixLQUFLLENBQUNmLE1BQU07SUFDNUIsTUFBTUMsT0FBTyxHQUFHRixPQUFPLEtBQUssQ0FBQyxHQUFHLFdBQVcsR0FBRyxTQUFTO0lBQ3ZELE1BQU1HLEtBQUssR0FBR0gsT0FBTyxLQUFLLENBQUMsR0FBRyxJQUFJLEdBQUcsS0FBSztJQUMxQyxNQUFNSSxVQUFVLEdBQUdKLE9BQU8sS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUc7SUFFNUMsT0FBTztNQUFFSyxJQUFJLEVBQUVXLEtBQUs7TUFBRWIsS0FBSztNQUFFRCxPQUFPO01BQUVFO0lBQVcsQ0FBQztFQUN0RCxDQUFDLENBQUMsT0FBT0UsR0FBRyxFQUFFO0lBQ1YsT0FBTztNQUNIRCxJQUFJLEVBQUUsRUFBRTtNQUNSRixLQUFLLEVBQUUsSUFBSTtNQUNYRCxPQUFPLEVBQUUseUJBQXlCO01BQ2xDRSxVQUFVLEVBQUU7SUFDaEIsQ0FBQztFQUNMO0FBQ0osQ0FBQztBQUNEcUIsTUFBTSxDQUFDQyxPQUFPLEdBQUc7RUFDYjdCLGdCQUFnQjtFQUNoQlU7QUFDSixDQUFDIn0=","map":{"version":3,"names":["Order","require","Table","sse","getOrdersService","orders","find","_length","length","message","error","statusCode","data","err","createOrderService","body","orderItems","email","orderStatus","paymentStatus","orderType","orderAmount","tableId","order","create","updateOne","$set","currentOrders","$push","status","console","log","module","exports"],"sourceRoot":"/Users/prashant/Desktop/social-backend/services/","sources":["order.js"],"sourcesContent":["const Order = require(\"../model/order\");\nconst Table = require(\"../model/table\");\n  const sse = require(\"../sse\");\n\nconst getOrdersService = async () => {\n    //   try {\n    //     const posts = await PostModel.find();\n    //     const _length = posts.length;\n    //     const message = _length === 0 ? \"Not found\" : \"success\";\n    //     const error = _length === 0 ? true : false;\n    //     const statusCode = _length === 0 ? 404 : 200;\n    //     return { data: posts, error, message, statusCode };\n    //   } catch (error) {\n    //     return {\n    //       data: [],\n    //       error: true,\n    //       message: \"Sorry an error occurred\",\n    //       statusCode: 500,\n    //     };\n    //   }\n    try {\n\n        const orders = await Order.find();\n        const _length = orders.length;\n        const message = _length === 0 ? \"Not found\" : \"success\";\n        const error = _length === 0 ? true : false;\n        const statusCode = _length === 0 ? 404 : 200;\n        return { data: orders, error, message, statusCode };\n    } catch (err) {\n        return {\n            data: [],\n            error: true,\n            message: \"Sorry an error occurred\",\n            statusCode: 500,\n        };\n    }\n};\nconst createOrderService = async (body) => {\n    try {\n        let { orderItems, email, orderStatus, paymentStatus, orderType, orderAmount, tableId } = body\n        const order = await Order.create({\n            orderItems, email, orderStatus, paymentStatus, orderType, orderAmount\n        });\n        await Table.updateOne({ tableId: tableId },\n            {\n                $set: {\n                    currentOrders: { $push: { orderItems, email, orderStatus, paymentStatus, orderType, orderAmount } },\n                    status: 'occupied'\n                }\n            })\n            console.log(\"here\")\n\n        const _length = order.length;\n        const message = _length === 0 ? \"Not found\" : \"success\";\n        const error = _length === 0 ? true : false;\n        const statusCode = _length === 0 ? 404 : 200;\n\n        return { data: order, error, message, statusCode };\n    } catch (err) {\n        return {\n            data: [],\n            error: true,\n            message: \"Sorry an error occurred\",\n            statusCode: 500,\n        };\n    }\n};\nmodule.exports = {\n    getOrdersService,\n    createOrderService\n};"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,gBAAgB,CAAC;AACvC,MAAMC,KAAK,GAAGD,OAAO,CAAC,gBAAgB,CAAC;AACrC,MAAME,GAAG,GAAGF,OAAO,CAAC,QAAQ,CAAC;AAE/B,MAAMG,gBAAgB,GAAG,YAAY;EACjC;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,IAAI;IAEA,MAAMC,MAAM,GAAG,MAAML,KAAK,CAACM,IAAI,EAAE;IACjC,MAAMC,OAAO,GAAGF,MAAM,CAACG,MAAM;IAC7B,MAAMC,OAAO,GAAGF,OAAO,KAAK,CAAC,GAAG,WAAW,GAAG,SAAS;IACvD,MAAMG,KAAK,GAAGH,OAAO,KAAK,CAAC,GAAG,IAAI,GAAG,KAAK;IAC1C,MAAMI,UAAU,GAAGJ,OAAO,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG;IAC5C,OAAO;MAAEK,IAAI,EAAEP,MAAM;MAAEK,KAAK;MAAED,OAAO;MAAEE;IAAW,CAAC;EACvD,CAAC,CAAC,OAAOE,GAAG,EAAE;IACV,OAAO;MACHD,IAAI,EAAE,EAAE;MACRF,KAAK,EAAE,IAAI;MACXD,OAAO,EAAE,yBAAyB;MAClCE,UAAU,EAAE;IAChB,CAAC;EACL;AACJ,CAAC;AACD,MAAMG,kBAAkB,GAAG,MAAOC,IAAI,IAAK;EACvC,IAAI;IACA,IAAI;MAAEC,UAAU;MAAEC,KAAK;MAAEC,WAAW;MAAEC,aAAa;MAAEC,SAAS;MAAEC,WAAW;MAAEC;IAAQ,CAAC,GAAGP,IAAI;IAC7F,MAAMQ,KAAK,GAAG,MAAMvB,KAAK,CAACwB,MAAM,CAAC;MAC7BR,UAAU;MAAEC,KAAK;MAAEC,WAAW;MAAEC,aAAa;MAAEC,SAAS;MAAEC;IAC9D,CAAC,CAAC;IACF,MAAMnB,KAAK,CAACuB,SAAS,CAAC;MAAEH,OAAO,EAAEA;IAAQ,CAAC,EACtC;MACII,IAAI,EAAE;QACFC,aAAa,EAAE;UAAEC,KAAK,EAAE;YAAEZ,UAAU;YAAEC,KAAK;YAAEC,WAAW;YAAEC,aAAa;YAAEC,SAAS;YAAEC;UAAY;QAAE,CAAC;QACnGQ,MAAM,EAAE;MACZ;IACJ,CAAC,CAAC;IACFC,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;IAEvB,MAAMxB,OAAO,GAAGgB,KAAK,CAACf,MAAM;IAC5B,MAAMC,OAAO,GAAGF,OAAO,KAAK,CAAC,GAAG,WAAW,GAAG,SAAS;IACvD,MAAMG,KAAK,GAAGH,OAAO,KAAK,CAAC,GAAG,IAAI,GAAG,KAAK;IAC1C,MAAMI,UAAU,GAAGJ,OAAO,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG;IAE5C,OAAO;MAAEK,IAAI,EAAEW,KAAK;MAAEb,KAAK;MAAED,OAAO;MAAEE;IAAW,CAAC;EACtD,CAAC,CAAC,OAAOE,GAAG,EAAE;IACV,OAAO;MACHD,IAAI,EAAE,EAAE;MACRF,KAAK,EAAE,IAAI;MACXD,OAAO,EAAE,yBAAyB;MAClCE,UAAU,EAAE;IAChB,CAAC;EACL;AACJ,CAAC;AACDqB,MAAM,CAACC,OAAO,GAAG;EACb7B,gBAAgB;EAChBU;AACJ,CAAC"}},"mtime":1671425215196}}